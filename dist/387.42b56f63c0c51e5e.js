"use strict";(self.webpackChunkcion_angular_16=self.webpackChunkcion_angular_16||[]).push([[387],{2843:(tt,U,a)=>{a.d(U,{$:()=>et});var P=a(4523),b=a(9159),T=a(5802),d=a(446),t=a(4438),G=a(4006),S=a(2168),K=a(6992),L=a(3390),W=a(758),O=a(177),M=a(9417),Y=a(8834),k=a(5084),F=a(2102),B=a(9213),z=a(9631),X=a(6695),N=a(2042);function V(p,w){if(1&p&&(t.j41(0,"option",22),t.EFF(1),t.k0s()),2&p){const r=w.$implicit;t.FS9("value",r),t.R7$(),t.SpI("",r," ")}}function H(p,w){if(1&p&&(t.j41(0,"option",22),t.EFF(1),t.k0s()),2&p){const r=w.$implicit;t.FS9("value",r),t.R7$(),t.SpI("",r," ")}}function Q(p,w){1&p&&(t.j41(0,"th",38),t.EFF(1," Appointment # "),t.k0s())}function Z(p,w){if(1&p&&(t.j41(0,"td",39)(1,"div",40)(2,"div",41),t.nrm(3,"img",42),t.k0s(),t.j41(4,"div")(5,"p",43),t.EFF(6),t.k0s(),t.j41(7,"p",44)(8,"span",45),t.EFF(9,"Patient"),t.k0s(),t.EFF(10),t.k0s(),t.j41(11,"p",44)(12,"span",45),t.EFF(13,"Appointment#"),t.k0s(),t.EFF(14),t.k0s()()()()),2&p){const r=w.$implicit;t.R7$(3),t.FS9("src",r.profileImage,t.B4B),t.R7$(3),t.SpI(" ",r.practiceLocation,""),t.R7$(4),t.SpI(" ",r.patientName,""),t.R7$(4),t.SpI(" ",r.appointmentId,"")}}function J(p,w){1&p&&(t.j41(0,"th",46),t.EFF(1," Appointment Date "),t.k0s())}function v(p,w){if(1&p&&(t.j41(0,"td",39),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&p){const r=w.$implicit;t.R7$(),t.SpI(" ",t.i5U(2,1,r.appointmentDate,"mediumDate")," ")}}function A(p,w){1&p&&(t.j41(0,"th",47),t.EFF(1," Status "),t.k0s())}function y(p,w){if(1&p&&(t.j41(0,"td",39)(1,"p"),t.EFF(2),t.k0s()()),2&p){const r=w.$implicit;t.R7$(),t.ZvI("status ",r.statusFlag,""),t.R7$(),t.JRh(r.status)}}function m(p,w){1&p&&(t.j41(0,"th",47),t.EFF(1," Actions "),t.k0s())}function D(p,w){if(1&p){const r=t.RV6();t.j41(0,"td",39)(1,"div",48)(2,"button",49),t.bIt("click",function(){const E=t.eBV(r).$implicit,n=t.XpG(2);return t.Njj(n.navigateToappointmentDetails(E.id))}),t.j41(3,"mat-icon",50),t.EFF(4,"visibility "),t.k0s()()()()}}function o(p,w){1&p&&t.nrm(0,"tr",51)}function u(p,w){1&p&&t.nrm(0,"tr",52)}function _(p,w){if(1&p&&(t.j41(0,"div",53)(1,"div",54),t.nrm(2,"img",55),t.j41(3,"p",56),t.EFF(4),t.k0s()()()),2&p){const r=t.XpG(2);t.R7$(4),t.JRh(r.validationMessages.noRecords)}}function C(p,w){if(1&p){const r=t.RV6();t.j41(0,"div",23)(1,"div",24)(2,"table",25),t.bIt("matSortChange",function(E){t.eBV(r);const n=t.XpG();return t.Njj(n.announceSortChange(E))}),t.qex(3,26),t.DNE(4,Q,2,0,"th",27)(5,Z,15,4,"td",28),t.bVm(),t.qex(6,29),t.DNE(7,J,2,0,"th",30)(8,v,3,4,"td",28),t.bVm(),t.qex(9,31),t.DNE(10,A,2,0,"th",32)(11,y,3,4,"td",28),t.bVm(),t.qex(12,33),t.DNE(13,m,2,0,"th",32)(14,D,5,0,"td",28),t.bVm(),t.DNE(15,o,1,0,"tr",34)(16,u,1,0,"tr",35),t.k0s(),t.DNE(17,_,5,1,"div",36),t.j41(18,"mat-paginator",37,1),t.bIt("page",function(E){t.eBV(r);const n=t.XpG();return t.Njj(n.handlePageEvent(E))}),t.k0s()()()}if(2&p){const r=t.XpG();t.R7$(2),t.Y8G("dataSource",r.appointmentsList),t.R7$(13),t.Y8G("matHeaderRowDef",r.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",r.displayedColumns),t.R7$(),t.Y8G("ngIf",r.appointmentsList&&0==r.appointmentsList.filteredData.length),t.R7$(),t.Y8G("length",r.totalCount)("pageSize",r.pageSize)("showFirstLastButtons",!0)("pageSizeOptions",r.pageSizeOptions)("pageIndex",r.pageIndex)}}function I(p,w){1&p&&(t.j41(0,"p",62),t.EFF(1,"No Records Found!"),t.k0s())}function x(p,w){1&p&&(t.j41(0,"p",62),t.EFF(1,"Currently there are no appointments to show!"),t.k0s())}function j(p,w){1&p&&(t.j41(0,"p",63),t.EFF(1,"Kindly click on \u201cBook Appointment\u201d to schedule a new appointment."),t.k0s())}function $(p,w){if(1&p&&(t.j41(0,"div",57)(1,"div",58),t.nrm(2,"img",59),t.DNE(3,I,2,0,"p",60)(4,x,2,0,"p",60)(5,j,2,0,"p",61),t.k0s()()),2&p){const r=t.XpG();t.R7$(3),t.Y8G("ngIf",!r.dayOneFlag),t.R7$(),t.Y8G("ngIf",r.dayOneFlag),t.R7$(),t.Y8G("ngIf",r.dayOneFlag)}}const q=[];let et=(()=>{class p{constructor(r,g,E,n,h){this.dialog=r,this.router=g,this.authService=E,this.commonService=n,this.adminService=h,this.displayedColumns=["name","appointmentDate","status","action"],this.dataSource=new b.I6(q),this.orderBy={updatedAt:-1},this.whereCond={},this.dayTwo=!1,this.dayOne=!0,this.dayOneFlag=!0,this.totalCount=0,this.pageIndex=0,this.pageSize=d.T0,this.pageSizeOptions=d.Xe,this.searchQuery="",this.practiceLocations=d.WM,this.appointmentStatus=d.K0,this.validationMessages=T.q,this.appStatusVal="",this.practiceLocationsVal="",this.toDate="",this.fieldValues=["Accepted","Rescheduled"],this.maxToDate=this.commonService.getMaxAppoinmentFutureMonths(),this.minToDate=new Date}ngOnInit(){(new Date).setHours(0,0,0,0),this.eodDate=new Date(Date.now()+6048e5),this.userBasedQueryChanged(),this.getAppointmentList("")}userBasedQueryChanged(){const r=new Date;r.setHours(0,0,0,0);let g=this.authService.getLoggedInInfo("role");this.whereCond=Object.assign(this.whereCond,"support_team"==g?{status:{$in:this.fieldValues},appointmentDate:{$gte:r,$lte:this.eodDate}}:"therapist"==g?{appointmentDate:{$gte:r}}:{status:{$in:this.fieldValues},appointmentDate:{$gte:r}})}searchRecords(r,g){g&&""!=g?Object.assign(this.whereCond,{[r]:{$in:g}}):delete this.whereCond[r],this.getAppointmentList("search")}reset(){this.totalCount=0,this.pageIndex=0,this.pageSize=d.T0,this.pageSizeOptions=d.Xe,this.toDate="",this.practiceLocationsVal="",this.appStatusVal="",this.whereCond={},this.userBasedQueryChanged(),this.getAppointmentList("reset")}onDateChange(r){const g=new Date(r.value);g.setHours(0,0,0,0),Object.assign(this.whereCond,{status:{$in:this.fieldValues},appointmentDate:{$gte:g,$lte:this.eodDate}}),this.getAppointmentList("search")}getAppointmentList(r=""){var g=this;return(0,P.A)(function*(){""==r&&g.commonService.showLoader();let E={query:g.whereCond,userQuery:"",fields:{_id:1,patientId:1,therapistId:1,appointmentId:1,status:1,createdAt:1,updatedAt:1,practiceLocation:1,appointmentDate:1},patientFields:{firstName:1,lastName:1,email:1,profileImage:1,status:1,practiceLocation:1},order:g.orderBy,limit:g.pageSize,offset:g.pageIndex*g.pageSize};yield g.authService.apiRequest("post","appointment/getAppointmentList",E).subscribe(function(){var n=(0,P.A)(function*(h){g.commonService.hideLoader(),g.totalCount=h.data.totalCount;let e=[];h.data.appointmentList.length>0&&(yield h.data.appointmentList.map(s=>{let i={id:s._id,appointmentId:s.appointmentId,practiceLocation:s.practiceLocation,createdAt:s.updatedAt,appointmentDate:s.appointmentDate,status:s.status,statusFlag:s.status.charAt(0).toLowerCase()+s.status.slice(1),patientName:s.patientId?.firstName+" "+s.patientId?.lastName,profileImage:d.ns.awsS3Url+d.ns.userProfileFolderPath+s.patientId?.profileImage,therapistName:s.therapistId?.firstName+" "+s.therapistId?.lastName};e.push(i)})),g.totalCount>0&&(g.dayTwo=!0,g.dayOne=!1),g.appointmentsList=new b.I6(e)});return function(h){return n.apply(this,arguments)}}())})()}resetFilter(){this.totalCount=0,this.pageIndex=0,this.pageSize=d.T0,this.pageSizeOptions=d.Xe,this.searchQuery="",this.getAppointmentList("reset")}handlePageEvent(r){this.pageSize=r.pageSize,this.pageIndex=r.pageIndex,this.getAppointmentList()}announceSortChange(r){let g;g="desc"==r.direction?-1:1,this.orderBy="name"==r.active?{appointmentId:g}:{[r.active]:g},this.getAppointmentList()}navigateToappointmentDetails(r){this.router.navigate([this.commonService.getLoggedInRoute(),"case-details",r])}static#t=this.\u0275fac=function(g){return new(g||p)(t.rXU(G.bZ),t.rXU(S.Ix),t.rXU(K.u),t.rXU(L.h),t.rXU(W.z))};static#e=this.\u0275cmp=t.VBU({type:p,selectors:[["app-appointment-requests"]],decls:35,vars:11,consts:[["picker2",""],["paginator",""],[1,"col-12","appointment--wrapper"],[1,"col-12"],[1,"card"],[1,"card-header","pb-0"],[1,"col-12","d-flex","align-items-center","justify-content-between","mb-3"],[1,"mb-0","clr--1F2F3E"],[1,"col-12","mt-2"],[1,"row"],[1,"col-12","col-sm-6","col-lg-3"],[1,"form-group"],["aria-label","Default select example",1,"form-select","form-control",3,"ngModelChange","ngModel"],["selected","","value",""],[3,"value",4,"ngFor","ngForOf"],[1,"input-group"],[1,"w-100","am--datepicker"],["readonly","true","placeholder","Appointment Date","matInput","",3,"ngModelChange","dateChange","focus","ngModel","min","max","matDatepicker"],["matIconSuffix","",3,"for"],["mat-stroked-button","","color","primary",3,"click"],["class","card-body",4,"ngIf"],["class","card-body day--one--wrapper d-flex align-items-center justify-content-center",4,"ngIf"],[3,"value"],[1,"card-body"],[1,"col-12","cust--mat--table--wrapper"],["mat-table","","matSort","",1,"cust--mat--table","box--row--table",3,"matSortChange","dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by number",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","appointmentDate"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by weight",4,"matHeaderCellDef"],["matColumnDef","status"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by symbol",4,"matHeaderCellDef"],["matColumnDef","action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","no--record--found align-items-center justify-content-center w-100",4,"ngIf"],[3,"page","length","pageSize","showFirstLastButtons","pageSizeOptions","pageIndex"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by number"],["mat-cell",""],[1,"d-flex","align-items-center"],[1,"img--box","flex-shrink-0"],["alt","Patient Profile Pic",1,"img-fluid",3,"src"],[1,"mb-0","font-16","text-primary","clr--1F2F3E","fw-500"],[1,"mb-0","font-14","clr--1F2F3E"],[1,"fw-700"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by weight"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by symbol"],[1,"w-100","d-flex","align-items-center","justify-content-end"],["mat-button","",1,"flex-shrink-0","min-width-unset","search--fields",3,"click"],[1,"material-symbols-outlined","flex-shrink-0","m-0","text-primary"],["mat-header-row",""],["mat-row",""],[1,"no--record--found","align-items-center","justify-content-center","w-100"],[1,"d-flex","flex-column","align-items-center","w-100"],["src","assets/images/ark/sad.png","alt","",1,"mb-3","sad--img"],[1,""],[1,"card-body","day--one--wrapper","d-flex","align-items-center","justify-content-center"],[1,"d-flex","flex-column","align-items-center","justify-content-center","w-100"],["src","assets/images/ark/calendar-lg.png","alt","",1,"img-fluid","mb-4"],["class","fw-700 clr--1F2F3E text-center mb-2",4,"ngIf"],["class","clr--1F2F3E text-center",4,"ngIf"],[1,"fw-700","clr--1F2F3E","text-center","mb-2"],[1,"clr--1F2F3E","text-center"]],template:function(g,E){if(1&g){const n=t.RV6();t.j41(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"div",6)(5,"h3",7),t.EFF(6,"Upcoming Appointment Requests"),t.k0s()(),t.j41(7,"div",8)(8,"div",9)(9,"div",10)(10,"div",11)(11,"select",12),t.bIt("ngModelChange",function(e){return t.eBV(n),t.Njj(E.searchRecords("practiceLocation",e))}),t.mxI("ngModelChange",function(e){return t.eBV(n),t.DH7(E.practiceLocationsVal,e)||(E.practiceLocationsVal=e),t.Njj(e)}),t.j41(12,"option",13),t.EFF(13,"Practice Location"),t.k0s(),t.DNE(14,V,2,2,"option",14),t.k0s()()(),t.j41(15,"div",10)(16,"div",11)(17,"select",12),t.bIt("ngModelChange",function(e){return t.eBV(n),t.Njj(E.searchRecords("status",e))}),t.mxI("ngModelChange",function(e){return t.eBV(n),t.DH7(E.appStatusVal,e)||(E.appStatusVal=e),t.Njj(e)}),t.j41(18,"option",13),t.EFF(19,"Appointment Status"),t.k0s(),t.DNE(20,H,2,2,"option",14),t.k0s()()(),t.j41(21,"div",10)(22,"div",11)(23,"div",15)(24,"mat-form-field",16)(25,"input",17),t.mxI("ngModelChange",function(e){return t.eBV(n),t.DH7(E.toDate,e)||(E.toDate=e),t.Njj(e)}),t.bIt("dateChange",function(e){return t.eBV(n),t.Njj(E.onDateChange(e))})("focus",function(){t.eBV(n);const e=t.sdS(28);return t.Njj(e.open())}),t.k0s(),t.nrm(26,"mat-datepicker-toggle",18)(27,"mat-datepicker",null,0),t.k0s()()()(),t.j41(29,"div",10)(30,"div",11)(31,"button",19),t.bIt("click",function(){return t.eBV(n),t.Njj(E.reset())}),t.EFF(32,"Reset Filter"),t.k0s()()()()()(),t.DNE(33,C,20,9,"div",20)(34,$,6,3,"div",21),t.k0s()()()}if(2&g){const n=t.sdS(28);t.R7$(11),t.R50("ngModel",E.practiceLocationsVal),t.R7$(3),t.Y8G("ngForOf",E.practiceLocations),t.R7$(3),t.R50("ngModel",E.appStatusVal),t.R7$(3),t.Y8G("ngForOf",E.appointmentStatus),t.R7$(5),t.R50("ngModel",E.toDate),t.Y8G("min",E.minToDate)("max",E.maxToDate)("matDatepicker",n),t.R7$(),t.Y8G("for",n),t.R7$(7),t.Y8G("ngIf",E.dayTwo),t.R7$(),t.Y8G("ngIf",E.dayOne)}},dependencies:[O.Sq,O.bT,M.xH,M.y7,M.me,M.wz,M.BC,M.vS,Y.$z,k.Vh,k.bZ,k.bU,F.rl,F.yw,B.An,z.fg,X.iy,N.B4,N.aE,b.Zl,b.tL,b.ji,b.cC,b.YV,b.iL,b.KS,b.$R,b.YZ,b.NB,O.vh],styles:[".day--one--wrapper[_ngcontent-%COMP%]{height:calc(100vh - 287px)}.day--one--wrapper[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px}  .cust--mat--table tbody tr td:last-child .mat-icon{height:24px;width:24px;font-size:24px}  .cust--mat--table tbody tr td .img--box{width:48px;height:48px;border-radius:100%;overflow:hidden;margin-right:15px}@media only screen and (max-width: 599px){.day--one--wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80px}.day--one--wrapper[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}.cust--mat--table--wrapper[_ngcontent-%COMP%]   .cust--mat--table.box--row--table.mat-mdc-table[_ngcontent-%COMP%]{width:800px}}@media only screen and (min-width: 600px) and (max-width: 979px){.day--one--wrapper[_ngcontent-%COMP%]{height:auto}.day--one--wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80px;margin-top:70px}.day--one--wrapper[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}}@media screen and (orientation: landscape) and (max-width: 850px){.day--one--wrapper[_ngcontent-%COMP%]{height:auto}.day--one--wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80px;margin-top:70px}.day--one--wrapper[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}.cust--mat--table--wrapper[_ngcontent-%COMP%]   .cust--mat--table.box--row--table.mat-mdc-table[_ngcontent-%COMP%]{width:900px}}"]})}return p})()},263:(tt,U,a)=>{a.d(U,{_:()=>E});var P=a(4523),b=a(9159),T=a(5802),d=a(446),t=a(4438),G=a(4006),S=a(2168),K=a(6992),L=a(3390),W=a(758),O=a(177),M=a(9417),Y=a(8834),k=a(2765),F=a(5084),B=a(2102),z=a(9213),X=a(9631),N=a(6695),V=a(2042);const H=()=>["/support-team/create-appointment"];function Q(n,h){1&n&&(t.j41(0,"button",30)(1,"mat-icon",19),t.EFF(2," add_circle "),t.k0s(),t.EFF(3," Create Appointment "),t.k0s()),2&n&&t.Y8G("routerLink",t.lJ4(1,H))}function Z(n,h){if(1&n&&(t.j41(0,"option",31),t.EFF(1),t.k0s()),2&n){const e=h.$implicit;t.FS9("value",e),t.R7$(),t.SpI("",e," ")}}function J(n,h){if(1&n&&(t.j41(0,"option",31),t.EFF(1),t.k0s()),2&n){const e=h.$implicit;t.FS9("value",e),t.R7$(),t.SpI("",e," ")}}function v(n,h){1&n&&(t.j41(0,"th",50),t.EFF(1," Case Details "),t.k0s())}function A(n,h){if(1&n&&(t.j41(0,"td",51)(1,"div",52)(2,"div",53),t.nrm(3,"img",54),t.k0s(),t.j41(4,"div")(5,"p",55),t.EFF(6),t.k0s(),t.j41(7,"p",56)(8,"span",57),t.EFF(9,"Patient"),t.k0s(),t.EFF(10),t.k0s(),t.j41(11,"p",56)(12,"span",57),t.EFF(13,"Case Name"),t.k0s(),t.EFF(14),t.k0s()()()()),2&n){const e=h.$implicit;t.R7$(3),t.FS9("src",e.profileImage,t.B4B),t.R7$(3),t.SpI(" ",e.practiceLocation?e.practiceLocation:""," "),t.R7$(4),t.SpI(" ",e.patientName," "),t.R7$(4),t.SpI(" ",e.caseName?e.caseName:"N/A"," ")}}function y(n,h){1&n&&(t.j41(0,"th",58),t.EFF(1," Appointment Date "),t.k0s())}function m(n,h){if(1&n&&(t.j41(0,"td",51),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&n){const e=h.$implicit;t.R7$(),t.SpI(" ",t.brH(2,1,e.appointmentDate,"MM-dd-yyyy hh:mm a","UTC")," ")}}function D(n,h){1&n&&(t.j41(0,"th",59),t.EFF(1," Status "),t.k0s())}function o(n,h){if(1&n&&(t.j41(0,"td",51)(1,"p"),t.EFF(2),t.k0s()()),2&n){const e=h.$implicit;t.R7$(),t.ZvI("status ",e.statusFlag,""),t.R7$(),t.JRh(e.status)}}function u(n,h){1&n&&(t.j41(0,"th",60),t.EFF(1," Patient Check in Status "),t.k0s())}function _(n,h){if(1&n){const e=t.RV6();t.j41(0,"td",51)(1,"mat-checkbox",61),t.bIt("change",function(i){const c=t.eBV(e).$implicit,f=t.XpG(2);return t.Njj(f.patientCheckIn(i,c))}),t.mxI("ngModelChange",function(i){const c=t.eBV(e).$implicit;return t.DH7(c.checkIn,i)||(c.checkIn=i),t.Njj(i)}),t.EFF(2,"Patient Check in Status"),t.k0s()()}if(2&n){const e=h.$implicit;t.R7$(),t.R50("ngModel",e.checkIn)}}function C(n,h){1&n&&(t.j41(0,"th",62),t.EFF(1," Action "),t.k0s())}function I(n,h){if(1&n){const e=t.RV6();t.j41(0,"td",51)(1,"div",63)(2,"button",64),t.bIt("click",function(){const i=t.eBV(e).$implicit,c=t.XpG(2);return t.Njj(c.navigateToappointmentDetails(i.id))}),t.j41(3,"mat-icon",65),t.EFF(4,"visibility "),t.k0s()()()()}}function x(n,h){1&n&&t.nrm(0,"tr",66)}function j(n,h){1&n&&t.nrm(0,"tr",67)}function $(n,h){if(1&n&&(t.j41(0,"div",68)(1,"div",69),t.nrm(2,"img",70),t.j41(3,"p",71),t.EFF(4),t.k0s()()()),2&n){const e=t.XpG(2);t.R7$(4),t.JRh(e.validationMessages.noRecords)}}function q(n,h){if(1&n){const e=t.RV6();t.j41(0,"div",32)(1,"div",33)(2,"table",34),t.bIt("matSortChange",function(i){t.eBV(e);const c=t.XpG();return t.Njj(c.announceSortChange(i))}),t.qex(3,35),t.DNE(4,v,2,0,"th",36)(5,A,15,4,"td",37),t.bVm(),t.qex(6,38),t.DNE(7,y,2,0,"th",39)(8,m,3,5,"td",37),t.bVm(),t.qex(9,40),t.DNE(10,D,2,0,"th",41)(11,o,3,4,"td",37),t.bVm(),t.qex(12,42),t.DNE(13,u,2,0,"th",43)(14,_,3,1,"td",37),t.bVm(),t.qex(15,44),t.DNE(16,C,2,0,"th",45)(17,I,5,0,"td",37),t.bVm(),t.DNE(18,x,1,0,"tr",46)(19,j,1,0,"tr",47),t.k0s(),t.DNE(20,$,5,1,"div",48),t.j41(21,"mat-paginator",49,2),t.bIt("page",function(i){t.eBV(e);const c=t.XpG();return t.Njj(c.handlePageEvent(i))}),t.k0s()()()}if(2&n){const e=t.XpG();t.R7$(2),t.Y8G("dataSource",e.appointmentsList),t.R7$(16),t.Y8G("matHeaderRowDef",e.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",e.displayedColumns),t.R7$(),t.Y8G("ngIf",e.appointmentsList&&0==e.appointmentsList.filteredData.length),t.R7$(),t.Y8G("length",e.totalCount)("pageSize",e.pageSize)("showFirstLastButtons",!0)("pageSizeOptions",e.pageSizeOptions)("pageIndex",e.pageIndex)}}function et(n,h){1&n&&(t.j41(0,"p",77),t.EFF(1,"No Records Found!"),t.k0s())}function p(n,h){1&n&&(t.j41(0,"p",77),t.EFF(1," Currently there are no appointments to show! "),t.k0s())}function w(n,h){1&n&&(t.j41(0,"p",78),t.EFF(1," Kindly click on \u201cBook Appointment\u201d to schedule a new appointment. "),t.k0s())}function r(n,h){if(1&n&&(t.j41(0,"div",72)(1,"div",73),t.nrm(2,"img",74),t.DNE(3,et,2,0,"p",75)(4,p,2,0,"p",75)(5,w,2,0,"p",76),t.k0s()()),2&n){const e=t.XpG();t.R7$(3),t.Y8G("ngIf",!e.dayOneFlag),t.R7$(),t.Y8G("ngIf",e.dayOneFlag),t.R7$(),t.Y8G("ngIf",e.dayOneFlag)}}const g=[];let E=(()=>{class n{constructor(e,s,i,c,f,l){this.dialog=e,this.router=s,this.authService=i,this.commonService=c,this.adminService=f,this.route=l,this.displayedColumns=["name","appointmentDate","status","checkIn","action"],this.dataSource=new b.I6(g),this.orderBy={updatedAt:-1},this.whereCond={},this.userQuery={},this.dayTwo=!1,this.dayOne=!0,this.dayOneFlag=!0,this.totalCount=0,this.pageIndex=0,this.pageSize=d.T0,this.pageSizeOptions=d.Xe,this.searchQuery="",this.practiceLocations=d.WM,this.appointmentStatus=d.K0,this.validationMessages=T.q,this.appStatusVal="",this.practiceLocationsVal="",this.toDate="",this.fromDate="",this.selectedFromDate="",this.selectedToDate="",this.seachByName="",this.seachById="",this.fieldValues=["Accepted","Rescheduled"],this.seachByPatientNameOrEmail="",this.patientQuery={},this.minToDate=null,this.maxToDate=null,this.userType=""}ngOnInit(){this.userBasedQueryChanged(),this.getAppointmentList("")}userBasedQueryChanged(){this.userType=this.authService.getLoggedInInfo("role")}searchRecords(e,s){let i=e.target.value.trim();if(""!=i){i=i.replace("+","\\+");let c={$regex:i,$options:"i"};if("byName"==s)this.userQuery={status:"Active",role:"therapist",$or:[{firstName:c},{lastName:c},{email:c}]};else if("byId"==s)this.whereCond=Object.assign(this.whereCond,{caseName:{$regex:i,$options:"i"}});else if("byPatientNameOrEmail"==s){let f=c,l=c,R=i.trim().split(" ");R[0]&&R[1]&&(f={$regex:R[0],$options:"i"},l={$regex:R[1],$options:"i"}),this.patientQuery={status:"Active",$or:[{firstName:f},{lastName:l},{email:c}]}}}else this.userQuery={},this.whereCond={},this.patientQuery={};this.getAppointmentList("search")}selectRecords(e,s){s&&""!=s?Object.assign(this.whereCond,{[e]:{$in:[s]}}):delete this.whereCond[e],this.getAppointmentList("search")}reset(){this.totalCount=0,this.pageIndex=0,this.pageSize=d.T0,this.pageSizeOptions=d.Xe,this.fromDate="",this.toDate="",this.selectedFromDate="",this.selectedToDate="",this.practiceLocationsVal="",this.appStatusVal="",this.seachById="",this.seachByName="",this.whereCond={},this.seachByPatientNameOrEmail="",this.patientQuery={},this.getAppointmentList("reset")}onDateChange(e,s){let i=new Date(e.value),c={};if("fromDate"==s){c={$gte:i},this.selectedFromDate=i;const f=new Date(i);f.setDate(i.getDate()+1),this.minToDate=f}else{c={$lte:i},this.selectedToDate=i;const f=new Date(i);f.setDate(i.getDate()-1),this.maxToDate=f}this.selectedFromDate&&this.selectedToDate?(c={$gte:this.selectedFromDate,$lte:this.selectedToDate},Object.assign(this.whereCond,{appointmentDate:c})):Object.assign(this.whereCond,{appointmentDate:c}),this.getAppointmentList("search")}getAppointmentList(e=""){var s=this;return(0,P.A)(function*(){""==e&&s.commonService.showLoader();let i={query:s.whereCond,userQuery:s.userQuery,patientQuery:s.patientQuery,fields:{_id:1,patientId:1,therapistId:1,appointmentId:1,status:1,caseName:1,createdAt:1,updatedAt:1,practiceLocation:1,appointmentDate:1,checkIn:1},patientFields:{firstName:1,lastName:1,email:1,status:1,profileImage:1,practiceLocation:1},order:s.orderBy,limit:s.pageSize,offset:s.pageIndex*s.pageSize};yield s.authService.apiRequest("post","appointment/getCaseList",i).subscribe(function(){var c=(0,P.A)(function*(f){s.commonService.hideLoader(),s.totalCount=f.data.totalCount;let l=[];f.data.appointmentList.length>0&&(yield f.data.appointmentList.map(R=>{let nt={id:R._id,practiceLocation:R.practiceLocation,appointmentId:R.appointmentId,checkIn:R.checkIn,createdAt:R.updatedAt,appointmentDate:R.appointmentDate,status:R.status,caseName:R.caseName,statusFlag:R.status.charAt(0).toLowerCase()+R.status.slice(1),patientName:R.patientObj[0]?.firstName+" "+R.patientObj[0]?.lastName,profileImage:d.ns.awsS3Url+d.ns.userProfileFolderPath+R.patientObj[0]?.profileImage};l.push(nt)})),s.totalCount>0&&(s.dayTwo=!0,s.dayOne=!1),s.appointmentsList=new b.I6(l)});return function(f){return c.apply(this,arguments)}}())})()}handlePageEvent(e){this.pageSize=e.pageSize,this.pageIndex=e.pageIndex,this.getAppointmentList()}announceSortChange(e){if("action"!=e.active){let s;s="desc"==e.direction?-1:1,this.orderBy="name"==e.active?{caseName:s}:{[e.active]:s},this.getAppointmentList()}}patientCheckIn(e,s){var i=this;return(0,P.A)(function*(){if(null!=e.source._checked){let c={query:{_id:s.id},updateInfo:{checkIn:e.source._checked}};yield i.authService.apiRequest("post","appointment/updatePatientCheckIn",c).subscribe(function(){var f=(0,P.A)(function*(l){});return function(l){return f.apply(this,arguments)}}())}})()}navigateToappointmentDetails(e){this.router.navigate([this.commonService.getLoggedInRoute(),"case-details",e])}static#t=this.\u0275fac=function(s){return new(s||n)(t.rXU(G.bZ),t.rXU(S.Ix),t.rXU(K.u),t.rXU(L.h),t.rXU(W.z),t.rXU(S.nX))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-appointments"]],decls:62,vars:18,consts:[["picker",""],["picker2",""],["paginator",""],[1,"col-12","appointment--wrapper"],[1,"col-12"],[1,"card"],[1,"card-header","pb-0"],[1,"col-12","d-flex","align-items-center","justify-content-between","mb-3"],[1,"mb-0","clr--1F2F3E"],["mat-raised-button","","color","primary",3,"routerLink",4,"ngIf"],[1,"col-12","mt-3"],[1,"row"],[1,"col-12","col-sm-6","col-lg-3"],[1,"form-group"],["aria-label","Default select example",1,"form-select","form-control",3,"ngModelChange","ngModel"],["selected","","value",""],[3,"value",4,"ngFor","ngForOf"],["type","text","placeholder","Case Name",1,"form-control","search--outer",3,"ngModelChange","keyup","ngModel"],["mat-button","",1,"p-0","flex-shrink-0","min-width-unset","search--fields"],[1,"material-symbols-outlined","flex-shrink-0"],["type","text","placeholder","Patient Name or email",1,"form-control","search--outer",3,"ngModelChange","keyup","ngModel"],["type","text","placeholder","Therapist Name",1,"form-control","search--outer",3,"ngModelChange","keyup","ngModel"],[1,"input-group"],[1,"w-100","am--datepicker"],["name","dp","readonly","isReadonly","placeholder","From Date","matInput","",3,"ngModelChange","dateChange","focus","ngModel","matDatepicker","max"],["matIconSuffix","",3,"for"],["name","dp2","readonly","isReadonly","placeholder","To Date","matInput","",3,"ngModelChange","dateChange","focus","ngModel","matDatepicker","min"],["mat-stroked-button","","color","primary",3,"click"],["class","card-body",4,"ngIf"],["class","card-body day--one--wrapper d-flex align-items-center justify-content-center",4,"ngIf"],["mat-raised-button","","color","primary",3,"routerLink"],[3,"value"],[1,"card-body"],[1,"col-12","cust--mat--table--wrapper"],["mat-table","","matSort","",1,"cust--mat--table","box--row--table",3,"matSortChange","dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by name",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","appointmentDate"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by appointmentDate",4,"matHeaderCellDef"],["matColumnDef","status"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by status",4,"matHeaderCellDef"],["matColumnDef","checkIn"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by checkIn",4,"matHeaderCellDef"],["matColumnDef","action"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","no--record--found align-items-center justify-content-center w-100",4,"ngIf"],[3,"page","length","pageSize","showFirstLastButtons","pageSizeOptions","pageIndex"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by name"],["mat-cell",""],[1,"d-flex","align-items-center"],[1,"img--box","flex-shrink-0"],["alt","Patient Profile Pic",1,"img-fluid",3,"src"],[1,"mb-0","font-16","text-primary","clr--1F2F3E","fw-500"],[1,"mb-0","font-14","text-primary","clr--1F2F3E"],[1,"fw-700"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by appointmentDate"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by status"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by checkIn"],[1,"",3,"change","ngModelChange","ngModel"],["mat-header-cell","","mat-sort-header",""],[1,"w-100","d-flex","align-items-center","justify-content-end"],["mat-button","",1,"flex-shrink-0","min-width-unset","search--fields",3,"click"],[1,"material-symbols-outlined","flex-shrink-0","m-0","text-primary"],["mat-header-row",""],["mat-row",""],[1,"no--record--found","align-items-center","justify-content-center","w-100"],[1,"d-flex","flex-column","align-items-center","w-100"],["src","assets/images/ark/sad.png","alt","",1,"mb-3","sad--img"],[1,""],[1,"card-body","day--one--wrapper","d-flex","align-items-center","justify-content-center"],[1,"d-flex","flex-column","align-items-center","justify-content-center","w-100"],["src","assets/images/ark/calendar-lg.png","alt","",1,"img-fluid","mb-4"],["class","fw-700 clr--1F2F3E text-center mb-2",4,"ngIf"],["class","clr--1F2F3E text-center",4,"ngIf"],[1,"fw-700","clr--1F2F3E","text-center","mb-2"],[1,"clr--1F2F3E","text-center"]],template:function(s,i){if(1&s){const c=t.RV6();t.j41(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"div",7)(5,"h3",8),t.EFF(6,"Cases"),t.k0s(),t.DNE(7,Q,4,2,"button",9),t.k0s(),t.j41(8,"div",10)(9,"div",11)(10,"div",12)(11,"div",13)(12,"select",14),t.bIt("ngModelChange",function(l){return t.eBV(c),t.Njj(i.selectRecords("practiceLocation",l))}),t.mxI("ngModelChange",function(l){return t.eBV(c),t.DH7(i.practiceLocationsVal,l)||(i.practiceLocationsVal=l),t.Njj(l)}),t.j41(13,"option",15),t.EFF(14,"Practice Location"),t.k0s(),t.DNE(15,Z,2,2,"option",16),t.k0s()()(),t.j41(16,"div",12)(17,"div",13)(18,"input",17),t.mxI("ngModelChange",function(l){return t.eBV(c),t.DH7(i.seachById,l)||(i.seachById=l),t.Njj(l)}),t.bIt("keyup",function(l){return t.eBV(c),t.Njj(i.searchRecords(l,"byId"))}),t.k0s(),t.j41(19,"button",18)(20,"mat-icon",19),t.EFF(21,"search "),t.k0s()()()(),t.j41(22,"div",12)(23,"div",13)(24,"input",20),t.mxI("ngModelChange",function(l){return t.eBV(c),t.DH7(i.seachByPatientNameOrEmail,l)||(i.seachByPatientNameOrEmail=l),t.Njj(l)}),t.bIt("keyup",function(l){return t.eBV(c),t.Njj(i.searchRecords(l,"byPatientNameOrEmail"))}),t.k0s(),t.j41(25,"button",18)(26,"mat-icon",19),t.EFF(27,"search "),t.k0s()()()(),t.j41(28,"div",12)(29,"div",13)(30,"input",21),t.mxI("ngModelChange",function(l){return t.eBV(c),t.DH7(i.seachByName,l)||(i.seachByName=l),t.Njj(l)}),t.bIt("keyup",function(l){return t.eBV(c),t.Njj(i.searchRecords(l,"byName"))}),t.k0s(),t.j41(31,"button",18)(32,"mat-icon",19),t.EFF(33,"search "),t.k0s()()()(),t.j41(34,"div",12)(35,"div",13)(36,"select",14),t.bIt("ngModelChange",function(l){return t.eBV(c),t.Njj(i.selectRecords("status",l))}),t.mxI("ngModelChange",function(l){return t.eBV(c),t.DH7(i.appStatusVal,l)||(i.appStatusVal=l),t.Njj(l)}),t.j41(37,"option",15),t.EFF(38,"Appointment Status"),t.k0s(),t.DNE(39,J,2,2,"option",16),t.k0s()()(),t.j41(40,"div",12)(41,"div",13)(42,"div",22)(43,"mat-form-field",23)(44,"input",24),t.mxI("ngModelChange",function(l){return t.eBV(c),t.DH7(i.fromDate,l)||(i.fromDate=l),t.Njj(l)}),t.bIt("dateChange",function(l){return t.eBV(c),t.Njj(i.onDateChange(l,"fromDate"))})("focus",function(){t.eBV(c);const l=t.sdS(47);return t.Njj(l.open())}),t.k0s(),t.nrm(45,"mat-datepicker-toggle",25)(46,"mat-datepicker",null,0),t.k0s()()()(),t.j41(48,"div",12)(49,"div",13)(50,"div",22)(51,"mat-form-field",23)(52,"input",26),t.mxI("ngModelChange",function(l){return t.eBV(c),t.DH7(i.toDate,l)||(i.toDate=l),t.Njj(l)}),t.bIt("dateChange",function(l){return t.eBV(c),t.Njj(i.onDateChange(l,"toDate"))})("focus",function(){t.eBV(c);const l=t.sdS(55);return t.Njj(l.open())}),t.k0s(),t.nrm(53,"mat-datepicker-toggle",25)(54,"mat-datepicker",null,1),t.k0s()()()(),t.j41(56,"div",12)(57,"div",13)(58,"button",27),t.bIt("click",function(){return t.eBV(c),t.Njj(i.reset())}),t.EFF(59,"Reset Filter"),t.k0s()()()()()(),t.DNE(60,q,23,9,"div",28)(61,r,6,3,"div",29),t.k0s()()()}if(2&s){const c=t.sdS(47),f=t.sdS(55);t.R7$(7),t.Y8G("ngIf","support_team"==i.userType),t.R7$(5),t.R50("ngModel",i.practiceLocationsVal),t.R7$(3),t.Y8G("ngForOf",i.practiceLocations),t.R7$(3),t.R50("ngModel",i.seachById),t.R7$(6),t.R50("ngModel",i.seachByPatientNameOrEmail),t.R7$(6),t.R50("ngModel",i.seachByName),t.R7$(6),t.R50("ngModel",i.appStatusVal),t.R7$(3),t.Y8G("ngForOf",i.appointmentStatus),t.R7$(5),t.R50("ngModel",i.fromDate),t.Y8G("matDatepicker",c)("max",i.maxToDate),t.R7$(),t.Y8G("for",c),t.R7$(7),t.R50("ngModel",i.toDate),t.Y8G("matDatepicker",f)("min",i.minToDate),t.R7$(),t.Y8G("for",f),t.R7$(7),t.Y8G("ngIf",i.dayTwo),t.R7$(),t.Y8G("ngIf",i.dayOne)}},dependencies:[O.Sq,O.bT,M.xH,M.y7,M.me,M.wz,M.BC,M.vS,Y.$z,k.So,F.Vh,F.bZ,F.bU,B.rl,B.yw,z.An,X.fg,N.iy,V.B4,V.aE,b.Zl,b.tL,b.ji,b.cC,b.YV,b.iL,b.KS,b.$R,b.YZ,b.NB,S.Wk,O.vh],styles:[".appointment--wrapper .cust--mat--table tbody tr td:last-child .mat-icon{height:24px;width:24px;font-size:24px}  .appointment--wrapper .cust--mat--table tbody tr td .img--box{width:48px;height:48px;border-radius:100%;overflow:hidden;margin-right:15px}  .appointment--wrapper .cust--mat--table.box--row--table.mat-mdc-table thead tr th:nth-child(1){width:35%}  .appointment--wrapper .cust--mat--table.box--row--table.mat-mdc-table thead tr th:nth-child(2){width:28%}  .appointment--wrapper .cust--mat--table.box--row--table.mat-mdc-table thead tr th:nth-child(3){width:200px}  .appointment--wrapper .cust--mat--table.box--row--table.mat-mdc-table thead tr th:nth-child(4){width:250px}  .appointment--wrapper .cust--mat--table.box--row--table.mat-mdc-table thead tr th:nth-child(5){width:150px}  .appointment--wrapper .cust--mat--table.box--row--table.mat-mdc-table tbody tr td:nth-child(1){width:35%}  .appointment--wrapper .cust--mat--table.box--row--table.mat-mdc-table tbody tr td:nth-child(2){width:28%}  .appointment--wrapper .cust--mat--table.box--row--table.mat-mdc-table tbody tr td:nth-child(3){width:200px}  .appointment--wrapper .cust--mat--table.box--row--table.mat-mdc-table tbody tr td:nth-child(4){width:250px}  .appointment--wrapper .cust--mat--table.box--row--table.mat-mdc-table tbody tr td:nth-child(5){width:150px}@media only screen and (max-width: 599px){.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table{width:860px}.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table thead tr th:nth-child(1){width:30%}.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table thead tr th:nth-child(2){width:28%}.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table thead tr th:nth-child(3){width:200px}.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table thead tr th:nth-child(4){width:225px}.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table thead tr th:nth-child(5){width:225px}.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table tbody tr td:nth-child(1){width:30%}.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table tbody tr td:nth-child(2){width:28%}.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table tbody tr td:nth-child(3){width:200px}.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table tbody tr td:nth-child(4){width:225px}.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table tbody tr td:nth-child(5){width:225px}}@media only screen and (min-width: 1280px) and (max-width: 1440px){.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table thead tr th:nth-child(1){width:25%}.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table thead tr th:nth-child(2){width:28%}.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table thead tr th:nth-child(3){width:200px}.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table thead tr th:nth-child(4){width:250px}.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table thead tr th:nth-child(5){width:150px}.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table tbody tr td:nth-child(1){width:25%}.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table tbody tr td:nth-child(2){width:28%}.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table tbody tr td:nth-child(3){width:200px}.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table tbody tr td:nth-child(4){width:250px}.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table tbody tr td:nth-child(5){width:150px}}@media screen and (orientation: landscape) and (max-width: 850px){.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table tbody tr td:nth-child(1), .appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table thead tr th:nth-child(1){width:30%}.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table tbody tr td:last-child, .appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table thead tr th:last-child{width:16%}.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table tbody tr td:nth-child(3), .appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table thead tr th:nth-child(3){width:150px}}"]})}return n})()},1767:(tt,U,a)=>{a.d(U,{E:()=>y});var P=a(4523),b=a(6695),T=a(2042),d=a(9159),t=a(4438),G=a(8617),S=a(4006),K=a(6992),L=a(2168),W=a(3390),O=a(177),M=a(9417),Y=a(8834),k=a(9213);const F=()=>[20,50,100];function B(m,D){if(1&m){const o=t.RV6();t.j41(0,"li",30)(1,"a",31),t.bIt("click",function(){const _=t.eBV(o).$implicit,C=t.XpG();return t.Njj(C.backToDirectory(_))}),t.EFF(2),t.k0s()()}if(2&m){const o=D.$implicit;t.R7$(2),t.JRh(o.name)}}function z(m,D){1&m&&(t.j41(0,"th",32),t.EFF(1," Name "),t.k0s())}function X(m,D){if(1&m){const o=t.RV6();t.j41(0,"td",33),t.bIt("click",function(){const _=t.eBV(o).$implicit,C=t.XpG();return t.Njj(C.gotoDirectory(_._id,_.icon,_.name))}),t.j41(1,"div",34)(2,"mat-icon",35),t.EFF(3),t.k0s(),t.j41(4,"p",36),t.EFF(5),t.k0s()()()}if(2&m){const o=D.$implicit;t.R7$(3),t.SpI(" ",o.icon,""),t.R7$(2),t.JRh(o.name)}}function N(m,D){1&m&&(t.j41(0,"th",37),t.EFF(1," Action "),t.k0s())}function V(m,D){if(1&m){const o=t.RV6();t.j41(0,"button",41),t.bIt("click",function(){t.eBV(o);const _=t.XpG().$implicit,C=t.XpG();return t.Njj(C.previewFile(_._id))}),t.j41(1,"mat-icon",42),t.EFF(2,"visibility "),t.k0s()()}}function H(m,D){if(1&m){const o=t.RV6();t.j41(0,"button",41),t.bIt("click",function(){t.eBV(o);const _=t.XpG().$implicit,C=t.XpG();return t.Njj(C.downloadFile(_._id))}),t.j41(1,"mat-icon",42),t.EFF(2,"download "),t.k0s()()}}function Q(m,D){if(1&m&&(t.j41(0,"td",38)(1,"div",39),t.DNE(2,V,3,0,"button",40)(3,H,3,0,"button",40),t.k0s()()),2&m){const o=D.$implicit;t.R7$(2),t.Y8G("ngIf","folder"!=o.icon),t.R7$(),t.Y8G("ngIf","folder"!=o.icon)}}function Z(m,D){1&m&&t.nrm(0,"tr",43)}function J(m,D){1&m&&t.nrm(0,"tr",44)}function v(m,D){1&m&&(t.j41(0,"div",45)(1,"div",46),t.nrm(2,"img",47),t.j41(3,"p",48),t.EFF(4,"No Records found"),t.k0s()()())}const A=[];let y=(()=>{class m{constructor(o,u,_,C,I){this._liveAnnouncer=o,this.dialog=u,this.authService=_,this.route=C,this.commonService=I,this.displayedColumns=["name","actions"],this.dataSource=new d.I6(A),this.loading=!1,this.arrLength=0,this.searchItem="",this.listArrayItems=[],this.userId="",this.userType="",this.pathValues=[],this.tempPathValues=[],this.dirId=this.route.snapshot.paramMap.get("id"),this.userId=this.authService.getLoggedInInfo("_id"),this.userType=this.authService.getLoggedInInfo("role").replace("_","-");var x=localStorage.getItem("pathValues");this.tempPathValues=x&&null!=x?JSON.parse(x):[],this.tempPathValues.forEach(j=>{this.pathValues.push(j)}),this.getDirectoryItems()}getDirectoryItems(){var o=this;this.loading=!0;var u={directory:this.dirId,searchValue:this.searchItem.trim()};this.authService.apiRequest("post","admin/getDirectoryItems",u).subscribe(function(){var _=(0,P.A)(function*(C){o.loading=!1,o.listArrayItems=[],C.data.directoryList.forEach(I=>{o.listArrayItems.push({_id:I._id,name:I.directory_name,actions:"",icon:"folder",color:"description"})}),C.data.fileList.forEach(I=>{var x=I.file_name.split(".").pop(),j="",$="";"pdf"==x?(j="picture_as_pdf",$="pdf"):"png"==x||"jpg"==x||"jpeg"==x?(j="photo",$="photo"):(j="description",$="description"),o.listArrayItems.push({_id:I._id,name:I.file_name,actions:"",icon:j,color:$})}),o.arrLength=o.listArrayItems.length,o.dataSource.data=o.listArrayItems,o.dataSource.paginator=o.paginator});return function(C){return _.apply(this,arguments)}}())}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}announceSortChange(o){this._liveAnnouncer.announce(o.direction?`Sorted ${o.direction}ending`:"Sorting cleared")}previewFile(o){window.open(`${window.location.origin}/${this.userType}/file-preview/`+o,"_blank")}gotoDirectory(o,u,_){this.dirId=o,"folder"==u&&(this.tempPathValues.push({link:"/document-details/"+o,name:_}),localStorage.setItem("pathValues",JSON.stringify(this.tempPathValues)),window.open(`${window.location.origin}/${this.userType}/document-details/`+o,"_self"))}searchRecords(){this.getDirectoryItems()}downloadFile(o){this.authService.apiRequest("post","admin/previewDocumentFile",{fileId:o}).subscribe(function(){var _=(0,P.A)(function*(C){window.open(`${C.data.previewUrl}`,"_blank")});return function(C){return _.apply(this,arguments)}}())}removeElementsFromIndex(o,u){return u<0||u>=o.length||o.splice(u),o}backToDirectory(o){var u=this;return(0,P.A)(function*(){var _=u.pathValues.findIndex(C=>C.name===o.name);u.tempPathValues=yield u.removeElementsFromIndex(u.pathValues,_+1),localStorage.setItem("pathValues",JSON.stringify(u.tempPathValues)),window.open(`${window.location.origin}/${u.userType}`+o.link,"_self")})()}static#t=this.\u0275fac=function(u){return new(u||m)(t.rXU(G.Ai),t.rXU(S.bZ),t.rXU(K.u),t.rXU(L.nX),t.rXU(W.h))};static#e=this.\u0275cmp=t.VBU({type:m,selectors:[["app-document-detailing"]],viewQuery:function(u,_){if(1&u&&(t.GBs(T.B4,5),t.GBs(b.iy,5)),2&u){let C;t.mGM(C=t.lsd())&&(_.sort=C.first),t.mGM(C=t.lsd())&&(_.paginator=C.first)}},decls:32,vars:10,consts:[[1,"col-12","document--detailing--wrapper"],[1,"card"],[1,"card-header","pb-0"],[1,"col-12","d-flex","align-items-center","mb-2"],[1,"row","w-100","align-items-center"],[1,"col-12","col-sm-6","col-lg-6","d-flex"],["mat-stroked-button","","color","primary",1,"me-3","back--btn",3,"routerLink"],[1,"material-symbols-outlined","flex-shrink-0","m-0"],[1,"form-group","mb-0","position-relative","w-100"],["type","text","placeholder","Search ",1,"form-control","search--outer",3,"keyup","ngModelChange","ngModel"],["mat-button","",1,"p-0","flex-shrink-0","min-width-unset","search--fields",3,"click"],[1,"material-symbols-outlined","flex-shrink-0"],[1,"col-12","col-sm-6","col-lg-6","d-flex","justify-content-end"],["aria-label","breadcrumb"],[1,"breadcrumb","mb-0","d-flex","align-items-center"],["class","breadcrumb-item fw-500","style","cursor: pointer;",4,"ngFor","ngForOf"],[1,"card-body"],[1,"row"],[1,"col-12","cust--mat--table--wrapper"],["mat-table","","matSort","",1,"cust--mat--table",3,"matSortChange","dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by number",4,"matHeaderCellDef"],["class","","mat-cell","",3,"click",4,"matCellDef"],["matColumnDef","actions"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by weight",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","no--record--found d-flex align-items-center justify-content-center w-100",4,"ngIf"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"pageSizeOptions"],[1,"breadcrumb-item","fw-500",2,"cursor","pointer"],[1,"font-12","clr--1F2F3E",3,"click"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by number"],["mat-cell","",1,"",3,"click"],[1,"d-flex","align-items-center"],[1,"me-3","cursor-pointer"],[1,"font-14","clr--292D32","cursor-pointer"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by weight"],["mat-cell",""],[1,"w-100","d-flex","align-items-center","justify-content-end"],["mat-button","","class","flex-shrink-0 min-width-unset search--fields",3,"click",4,"ngIf"],["mat-button","",1,"flex-shrink-0","min-width-unset","search--fields",3,"click"],[1,"material-symbols-outlined","flex-shrink-0","m-0","text-primary"],["mat-header-row",""],["mat-row",""],[1,"no--record--found","d-flex","align-items-center","justify-content-center","w-100"],[1,"d-flex","flex-column","align-items-center","w-100"],["src","assets/images/ark/sad.png","alt","",1,"mb-3","sad--img"],[1,""]],template:function(u,_){1&u&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"button",6)(7,"mat-icon",7),t.EFF(8," keyboard_backspace "),t.k0s()(),t.j41(9,"div",8)(10,"input",9),t.bIt("keyup",function(){return _.searchRecords()}),t.mxI("ngModelChange",function(I){return t.DH7(_.searchItem,I)||(_.searchItem=I),I}),t.k0s(),t.j41(11,"button",10),t.bIt("click",function(){return _.searchRecords()}),t.j41(12,"mat-icon",11),t.EFF(13,"search "),t.k0s()()()(),t.j41(14,"div",12)(15,"nav",13)(16,"ol",14),t.DNE(17,B,3,1,"li",15),t.k0s()()()()()(),t.j41(18,"div",16)(19,"div",17)(20,"div",18)(21,"table",19),t.bIt("matSortChange",function(I){return _.announceSortChange(I)}),t.qex(22,20),t.DNE(23,z,2,0,"th",21)(24,X,6,2,"td",22),t.bVm(),t.qex(25,23),t.DNE(26,N,2,0,"th",24)(27,Q,4,2,"td",25),t.bVm(),t.DNE(28,Z,1,0,"tr",26)(29,J,1,0,"tr",27),t.k0s(),t.DNE(30,v,5,0,"div",28),t.nrm(31,"mat-paginator",29),t.k0s()()()()()),2&u&&(t.R7$(6),t.Mz_("routerLink","/",_.userType,"/document-listing"),t.R7$(4),t.R50("ngModel",_.searchItem),t.R7$(7),t.Y8G("ngForOf",_.pathValues),t.R7$(4),t.Y8G("dataSource",_.dataSource),t.R7$(7),t.Y8G("matHeaderRowDef",_.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",_.displayedColumns),t.R7$(),t.Y8G("ngIf",0==_.arrLength&&!_.loading),t.R7$(),t.Y8G("pageSizeOptions",t.lJ4(9,F)))},dependencies:[O.Sq,O.bT,M.me,M.BC,M.vS,Y.$z,k.An,b.iy,T.B4,T.aE,d.Zl,d.tL,d.ji,d.cC,d.YV,d.iL,d.KS,d.$R,d.YZ,d.NB,L.Wk],styles:[".document--detailing--wrapper[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .back--btn[_ngcontent-%COMP%]{min-width:42px}.document--detailing--wrapper[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .back--btn[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{width:24px;height:24px;font-size:24px}.document--detailing--wrapper[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .search--fields[_ngcontent-%COMP%]{right:6px}.document--detailing--wrapper[_ngcontent-%COMP%]     table tbody tr td{padding:12px 10px!important}.document--detailing--wrapper[_ngcontent-%COMP%]     table tbody tr td:first-child .mat-icon{color:#31b7b7;flex-shrink:0}.document--detailing--wrapper[_ngcontent-%COMP%]     table tbody tr td:last-child .mat-icon{height:24px;width:24px;font-size:24px;color:#31b7b7}"]})}return m})()},9153:(tt,U,a)=>{a.d(U,{Z:()=>J});var P=a(4523),b=a(6695),T=a(2042),d=a(9159),t=a(4438),G=a(8617),S=a(4006),K=a(6992),L=a(3390),W=a(177),O=a(9417),M=a(8834),Y=a(9213),k=a(2168);const F=()=>[20,50,100];function B(v,A){1&v&&(t.j41(0,"th",25),t.EFF(1," Name "),t.k0s())}function z(v,A){if(1&v){const y=t.RV6();t.j41(0,"td",26),t.bIt("click",function(){const D=t.eBV(y).$implicit,o=t.XpG();return t.Njj(o.gotoDirectory(D.directory_name,D._id))}),t.j41(1,"div",27)(2,"mat-icon",28),t.EFF(3,"folder"),t.k0s(),t.j41(4,"p",29),t.EFF(5),t.k0s()()()}if(2&v){const y=A.$implicit,m=t.XpG();t.FCK("routerLink","/",m.userType,"/document-details/",y._id,""),t.R7$(5),t.JRh(y.directory_name)}}function X(v,A){1&v&&t.nrm(0,"th",30)}function N(v,A){if(1&v&&(t.j41(0,"td",31),t.EFF(1),t.k0s()),2&v){const y=A.$implicit;t.R7$(),t.SpI(" ",y.actions," ")}}function V(v,A){1&v&&t.nrm(0,"tr",32)}function H(v,A){1&v&&t.nrm(0,"tr",33)}function Q(v,A){1&v&&(t.j41(0,"div",34)(1,"div",35),t.nrm(2,"img",36),t.j41(3,"p",37),t.EFF(4,"No Records found"),t.k0s()()())}const Z=[];let J=(()=>{class v{constructor(y,m,D,o){this._liveAnnouncer=y,this.dialog=m,this.authService=D,this.commonService=o,this.displayedColumns=["directory_name","actions"],this.dataSource=new d.I6(Z),this.searchDirectory="",this.loading=!1,this.arrLength=0,this.userType="",this.pathValues=[],this.userType=this.authService.getLoggedInInfo("role").replace("_","-"),this.pathValues.push({link:"/document-listing",name:"Documents"}),this.getDefaultDirectories()}getDefaultDirectories(){var y=this;this.loading=!0;var m=this.authService.getLoggedInInfo("_id"),D=this.authService.getLoggedInInfo("role"),o={searchValue:this.searchDirectory.trim(),userRole:D,userId:m};this.authService.apiRequest("post","admin/getDefaultDirectories",o).subscribe(function(){var u=(0,P.A)(function*(_){y.loading=!1;var C=_.data.directoryList;y.arrLength=C.length,y.dataSource.data=C,y.dataSource.paginator=y.paginator});return function(_){return u.apply(this,arguments)}}())}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}announceSortChange(y){this._liveAnnouncer.announce(y.direction?`Sorted ${y.direction}ending`:"Sorting cleared")}searchRecords(){this.getDefaultDirectories()}gotoDirectory(y,m){this.pathValues.push({link:"/document-details/"+m,name:y}),localStorage.setItem("pathValues",JSON.stringify(this.pathValues))}static#t=this.\u0275fac=function(m){return new(m||v)(t.rXU(G.Ai),t.rXU(S.bZ),t.rXU(K.u),t.rXU(L.h))};static#e=this.\u0275cmp=t.VBU({type:v,selectors:[["app-document-listing"]],viewQuery:function(m,D){if(1&m&&(t.GBs(T.B4,5),t.GBs(b.iy,5)),2&m){let o;t.mGM(o=t.lsd())&&(D.sort=o.first),t.mGM(o=t.lsd())&&(D.paginator=o.first)}},decls:28,vars:7,consts:[[1,"col-12","document--wrapper"],[1,"card"],[1,"card-header","pb-0"],[1,"col-12","d-flex","align-items-center","justify-content-between","mb-3"],[1,"mb-0","clr--1F2F3E"],[1,"col-12","mt-2"],[1,"row"],[1,"col-12","col-sm-6","col-lg-6"],[1,"form-group"],["type","text","placeholder","Search ",1,"form-control","search--outer",3,"keyup","ngModelChange","ngModel"],["mat-button","",1,"p-0","flex-shrink-0","min-width-unset","search--fields",3,"click"],[1,"material-symbols-outlined","flex-shrink-0"],[1,"card-body"],[1,"col-12","cust--mat--table--wrapper"],["mat-table","","matSort","",1,"cust--mat--table",3,"matSortChange","dataSource"],["matColumnDef","directory_name"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by number",4,"matHeaderCellDef"],["mat-cell","",3,"routerLink","click",4,"matCellDef"],["matColumnDef","actions"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by weight",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","no--record--found d-flex align-items-center justify-content-center w-100",4,"ngIf"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by number"],["mat-cell","",3,"click","routerLink"],[1,"d-flex","align-items-center"],[1,"me-3","cursor-pointer"],[1,"font-14","clr--292D32","cursor-pointer"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by weight"],["mat-cell",""],["mat-header-row",""],["mat-row",""],[1,"no--record--found","d-flex","align-items-center","justify-content-center","w-100"],[1,"d-flex","flex-column","align-items-center","w-100"],["src","assets/images/ark/sad.png","alt","",1,"mb-3","sad--img"],[1,""]],template:function(m,D){1&m&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),t.EFF(5,"Documents"),t.k0s()(),t.j41(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"input",9),t.bIt("keyup",function(){return D.searchRecords()}),t.mxI("ngModelChange",function(u){return t.DH7(D.searchDirectory,u)||(D.searchDirectory=u),u}),t.k0s(),t.j41(11,"button",10),t.bIt("click",function(){return D.searchRecords()}),t.j41(12,"mat-icon",11),t.EFF(13,"search "),t.k0s()()()()()()(),t.j41(14,"div",12)(15,"div",6)(16,"div",13)(17,"table",14),t.bIt("matSortChange",function(u){return D.announceSortChange(u)}),t.qex(18,15),t.DNE(19,B,2,0,"th",16)(20,z,6,4,"td",17),t.bVm(),t.qex(21,18),t.DNE(22,X,1,0,"th",19)(23,N,2,1,"td",20),t.bVm(),t.DNE(24,V,1,0,"tr",21)(25,H,1,0,"tr",22),t.k0s(),t.DNE(26,Q,5,0,"div",23),t.nrm(27,"mat-paginator",24),t.k0s()()()()()),2&m&&(t.R7$(10),t.R50("ngModel",D.searchDirectory),t.R7$(7),t.Y8G("dataSource",D.dataSource),t.R7$(7),t.Y8G("matHeaderRowDef",D.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",D.displayedColumns),t.R7$(),t.Y8G("ngIf",0==D.arrLength&&!D.loading),t.R7$(),t.Y8G("pageSizeOptions",t.lJ4(6,F)))},dependencies:[W.bT,O.me,O.BC,O.vS,M.$z,Y.An,b.iy,T.B4,T.aE,d.Zl,d.tL,d.ji,d.cC,d.YV,d.iL,d.KS,d.$R,d.YZ,d.NB,k.Wk],styles:[".document--wrapper[_ngcontent-%COMP%]     table tbody tr td{padding:12px 10px!important}.document--wrapper[_ngcontent-%COMP%]     table tbody tr td .mat-icon{height:24px;width:24px;font-size:24px;color:#31b7b7;flex-shrink:0}.document--wrapper[_ngcontent-%COMP%]     table tbody tr td:hover{font-weight:700}"]})}return v})()}}]);