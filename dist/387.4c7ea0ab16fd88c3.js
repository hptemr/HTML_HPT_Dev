"use strict";(self.webpackChunkcion_angular_16=self.webpackChunkcion_angular_16||[]).push([[387],{2843:(q,$,i)=>{i.d($,{$:()=>tt});var A=i(4523),b=i(9159),P=i(5802),_=i(446),t=i(4438),U=i(4006),j=i(2168),G=i(6992),k=i(3390),K=i(758),R=i(177),M=i(9417),W=i(8834),S=i(5084),T=i(2102),L=i(9213),z=i(9631),Y=i(6695),B=i(2042);function N(c,v){if(1&c&&(t.j41(0,"option",22),t.EFF(1),t.k0s()),2&c){const s=v.$implicit;t.FS9("value",s),t.R7$(),t.SpI("",s," ")}}function X(c,v){if(1&c&&(t.j41(0,"option",22),t.EFF(1),t.k0s()),2&c){const s=v.$implicit;t.FS9("value",s),t.R7$(),t.SpI("",s," ")}}function H(c,v){1&c&&(t.j41(0,"th",38),t.EFF(1," Appointment # "),t.k0s())}function Q(c,v){if(1&c&&(t.j41(0,"td",39)(1,"div",40)(2,"div",41),t.nrm(3,"img",42),t.k0s(),t.j41(4,"div")(5,"p",43),t.EFF(6),t.k0s(),t.j41(7,"p",44)(8,"span",45),t.EFF(9,"Patient"),t.k0s(),t.EFF(10),t.k0s(),t.j41(11,"p",44)(12,"span",45),t.EFF(13,"Appointment#"),t.k0s(),t.EFF(14),t.k0s()()()()),2&c){const s=v.$implicit;t.R7$(3),t.FS9("src",s.profileImage,t.B4B),t.R7$(3),t.SpI(" ",s.practiceLocation,""),t.R7$(4),t.SpI(" ",s.patientName,""),t.R7$(4),t.SpI(" ",s.appointmentId,"")}}function Z(c,v){1&c&&(t.j41(0,"th",46),t.EFF(1," Appointment Date "),t.k0s())}function y(c,v){if(1&c&&(t.j41(0,"td",39),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&c){const s=v.$implicit;t.R7$(),t.SpI(" ",t.i5U(2,1,s.appointmentDate,"mediumDate")," ")}}function O(c,v){1&c&&(t.j41(0,"th",47),t.EFF(1," Status "),t.k0s())}function E(c,v){if(1&c&&(t.j41(0,"td",39)(1,"p"),t.EFF(2),t.k0s()()),2&c){const s=v.$implicit;t.R7$(),t.ZvI("status ",s.statusFlag,""),t.R7$(),t.JRh(s.status)}}function m(c,v){1&c&&(t.j41(0,"th",47),t.EFF(1," Actions "),t.k0s())}function D(c,v){if(1&c){const s=t.RV6();t.j41(0,"td",39)(1,"div",48)(2,"button",49),t.bIt("click",function(){const n=t.eBV(s).$implicit,d=t.XpG(2);return t.Njj(d.navigateToappointmentDetails(n.id))}),t.j41(3,"mat-icon",50),t.EFF(4,"visibility "),t.k0s()()()()}}function o(c,v){1&c&&t.nrm(0,"tr",51)}function h(c,v){1&c&&t.nrm(0,"tr",52)}function u(c,v){if(1&c&&(t.j41(0,"div",53)(1,"div",54),t.nrm(2,"img",55),t.j41(3,"p",56),t.EFF(4),t.k0s()()()),2&c){const s=t.XpG(2);t.R7$(4),t.JRh(s.validationMessages.noRecords)}}function C(c,v){if(1&c){const s=t.RV6();t.j41(0,"div",23)(1,"div",24)(2,"table",25),t.bIt("matSortChange",function(n){t.eBV(s);const d=t.XpG();return t.Njj(d.announceSortChange(n))}),t.qex(3,26),t.DNE(4,H,2,0,"th",27)(5,Q,15,4,"td",28),t.bVm(),t.qex(6,29),t.DNE(7,Z,2,0,"th",30)(8,y,3,4,"td",28),t.bVm(),t.qex(9,31),t.DNE(10,O,2,0,"th",32)(11,E,3,4,"td",28),t.bVm(),t.qex(12,33),t.DNE(13,m,2,0,"th",32)(14,D,5,0,"td",28),t.bVm(),t.DNE(15,o,1,0,"tr",34)(16,h,1,0,"tr",35),t.k0s(),t.DNE(17,u,5,1,"div",36),t.j41(18,"mat-paginator",37,1),t.bIt("page",function(n){t.eBV(s);const d=t.XpG();return t.Njj(d.handlePageEvent(n))}),t.k0s()()()}if(2&c){const s=t.XpG();t.R7$(2),t.Y8G("dataSource",s.appointmentsList),t.R7$(13),t.Y8G("matHeaderRowDef",s.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",s.displayedColumns),t.R7$(),t.Y8G("ngIf",s.appointmentsList&&0==s.appointmentsList.filteredData.length),t.R7$(),t.Y8G("length",s.totalCount)("pageSize",s.pageSize)("showFirstLastButtons",!0)("pageSizeOptions",s.pageSizeOptions)("pageIndex",s.pageIndex)}}function I(c,v){1&c&&(t.j41(0,"p",62),t.EFF(1,"No Records Found!"),t.k0s())}function x(c,v){1&c&&(t.j41(0,"p",62),t.EFF(1,"Currently there are no appointments to show!"),t.k0s())}function F(c,v){1&c&&(t.j41(0,"p",63),t.EFF(1,"Kindly click on \u201cBook Appointment\u201d to schedule a new appointment."),t.k0s())}function V(c,v){if(1&c&&(t.j41(0,"div",57)(1,"div",58),t.nrm(2,"img",59),t.DNE(3,I,2,0,"p",60)(4,x,2,0,"p",60)(5,F,2,0,"p",61),t.k0s()()),2&c){const s=t.XpG();t.R7$(3),t.Y8G("ngIf",!s.dayOneFlag),t.R7$(),t.Y8G("ngIf",s.dayOneFlag),t.R7$(),t.Y8G("ngIf",s.dayOneFlag)}}const J=[];let tt=(()=>{class c{constructor(s,g,n,d,e){this.dialog=s,this.router=g,this.authService=n,this.commonService=d,this.adminService=e,this.displayedColumns=["name","appointmentDate","status","action"],this.dataSource=new b.I6(J),this.orderBy={updatedAt:-1},this.whereCond={},this.dayTwo=!1,this.dayOne=!0,this.dayOneFlag=!0,this.totalCount=0,this.pageIndex=0,this.pageSize=_.T0,this.pageSizeOptions=_.Xe,this.searchQuery="",this.practiceLocations=_.WM,this.appointmentStatus=_.K0,this.validationMessages=P.q,this.appStatusVal="",this.practiceLocationsVal="",this.toDate="",this.fieldValues=["Accepted","Rescheduled"],this.maxToDate=this.commonService.getMaxAppoinmentFutureMonths(),this.minToDate=new Date}ngOnInit(){(new Date).setHours(0,0,0,0),this.eodDate=new Date(Date.now()+6048e5),this.userBasedQueryChanged(),this.getAppointmentList("")}userBasedQueryChanged(){const s=new Date;s.setHours(0,0,0,0);let g=this.authService.getLoggedInInfo("role");this.whereCond=Object.assign(this.whereCond,"support_team"==g?{status:{$in:this.fieldValues},appointmentDate:{$gte:s,$lte:this.eodDate}}:"therapist"==g?{appointmentDate:{$gte:s}}:{status:{$in:this.fieldValues},appointmentDate:{$gte:s}})}searchRecords(s,g){g&&""!=g?Object.assign(this.whereCond,{[s]:{$in:g}}):delete this.whereCond[s],this.getAppointmentList("search")}reset(){this.totalCount=0,this.pageIndex=0,this.pageSize=_.T0,this.pageSizeOptions=_.Xe,this.toDate="",this.practiceLocationsVal="",this.appStatusVal="",this.whereCond={},this.userBasedQueryChanged(),this.getAppointmentList("reset")}onDateChange(s){const g=new Date(s.value);g.setHours(0,0,0,0),Object.assign(this.whereCond,{status:{$in:this.fieldValues},appointmentDate:{$gte:g,$lte:this.eodDate}}),this.getAppointmentList("search")}getAppointmentList(s=""){var g=this;return(0,A.A)(function*(){""==s&&g.commonService.showLoader();let n={query:g.whereCond,userQuery:"",fields:{_id:1,patientId:1,therapistId:1,appointmentId:1,status:1,createdAt:1,updatedAt:1,practiceLocation:1,appointmentDate:1},patientFields:{firstName:1,lastName:1,email:1,profileImage:1,status:1,practiceLocation:1},order:g.orderBy,limit:g.pageSize,offset:g.pageIndex*g.pageSize};yield g.authService.apiRequest("post","appointment/getAppointmentList",n).subscribe(function(){var d=(0,A.A)(function*(e){g.commonService.hideLoader(),g.totalCount=e.data.totalCount;let r=[];e.data.appointmentList.length>0&&(yield e.data.appointmentList.map(a=>{let p={id:a._id,appointmentId:a.appointmentId,practiceLocation:a.practiceLocation,createdAt:a.updatedAt,appointmentDate:a.appointmentDate,status:a.status,statusFlag:a.status.charAt(0).toLowerCase()+a.status.slice(1),patientName:a.patientId?.firstName+" "+a.patientId?.lastName,profileImage:_.ns.awsS3Url+_.ns.userProfileFolderPath+a.patientId?.profileImage,therapistName:a.therapistId?.firstName+" "+a.therapistId?.lastName};r.push(p)})),g.totalCount>0&&(g.dayTwo=!0,g.dayOne=!1),g.appointmentsList=new b.I6(r)});return function(e){return d.apply(this,arguments)}}())})()}resetFilter(){this.totalCount=0,this.pageIndex=0,this.pageSize=_.T0,this.pageSizeOptions=_.Xe,this.searchQuery="",this.getAppointmentList("reset")}handlePageEvent(s){this.pageSize=s.pageSize,this.pageIndex=s.pageIndex,this.getAppointmentList()}announceSortChange(s){let g;g="desc"==s.direction?-1:1,this.orderBy="name"==s.active?{appointmentId:g}:{[s.active]:g},this.getAppointmentList()}navigateToappointmentDetails(s){this.router.navigate([this.commonService.getLoggedInRoute(),"case-details",s])}static#t=this.\u0275fac=function(g){return new(g||c)(t.rXU(U.bZ),t.rXU(j.Ix),t.rXU(G.u),t.rXU(k.h),t.rXU(K.z))};static#e=this.\u0275cmp=t.VBU({type:c,selectors:[["app-appointment-requests"]],decls:35,vars:11,consts:[["picker2",""],["paginator",""],[1,"col-12","appointment--wrapper"],[1,"col-12"],[1,"card"],[1,"card-header","pb-0"],[1,"col-12","d-flex","align-items-center","justify-content-between","mb-3"],[1,"mb-0","clr--1F2F3E"],[1,"col-12","mt-2"],[1,"row"],[1,"col-12","col-sm-6","col-lg-3"],[1,"form-group"],["aria-label","Default select example",1,"form-select","form-control",3,"ngModelChange","ngModel"],["selected","","value",""],[3,"value",4,"ngFor","ngForOf"],[1,"input-group"],[1,"w-100","am--datepicker"],["readonly","true","placeholder","Appointment Date","matInput","",3,"ngModelChange","dateChange","focus","ngModel","min","max","matDatepicker"],["matIconSuffix","",3,"for"],["mat-stroked-button","","color","primary",3,"click"],["class","card-body",4,"ngIf"],["class","card-body day--one--wrapper d-flex align-items-center justify-content-center",4,"ngIf"],[3,"value"],[1,"card-body"],[1,"col-12","cust--mat--table--wrapper"],["mat-table","","matSort","",1,"cust--mat--table","box--row--table",3,"matSortChange","dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by number",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","appointmentDate"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by weight",4,"matHeaderCellDef"],["matColumnDef","status"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by symbol",4,"matHeaderCellDef"],["matColumnDef","action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","no--record--found align-items-center justify-content-center w-100",4,"ngIf"],[3,"page","length","pageSize","showFirstLastButtons","pageSizeOptions","pageIndex"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by number"],["mat-cell",""],[1,"d-flex","align-items-center"],[1,"img--box","flex-shrink-0"],["alt","Patient Profile Pic",1,"img-fluid",3,"src"],[1,"mb-0","font-16","text-primary","clr--1F2F3E","fw-500"],[1,"mb-0","font-14","clr--1F2F3E"],[1,"fw-700"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by weight"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by symbol"],[1,"w-100","d-flex","align-items-center","justify-content-end"],["mat-button","",1,"flex-shrink-0","min-width-unset","search--fields",3,"click"],[1,"material-symbols-outlined","flex-shrink-0","m-0","text-primary"],["mat-header-row",""],["mat-row",""],[1,"no--record--found","align-items-center","justify-content-center","w-100"],[1,"d-flex","flex-column","align-items-center","w-100"],["src","assets/images/ark/sad.png","alt","",1,"mb-3","sad--img"],[1,""],[1,"card-body","day--one--wrapper","d-flex","align-items-center","justify-content-center"],[1,"d-flex","flex-column","align-items-center","justify-content-center","w-100"],["src","assets/images/ark/calendar-lg.png","alt","",1,"img-fluid","mb-4"],["class","fw-700 clr--1F2F3E text-center mb-2",4,"ngIf"],["class","clr--1F2F3E text-center",4,"ngIf"],[1,"fw-700","clr--1F2F3E","text-center","mb-2"],[1,"clr--1F2F3E","text-center"]],template:function(g,n){if(1&g){const d=t.RV6();t.j41(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"div",6)(5,"h3",7),t.EFF(6,"Upcoming Appointment Requests"),t.k0s()(),t.j41(7,"div",8)(8,"div",9)(9,"div",10)(10,"div",11)(11,"select",12),t.bIt("ngModelChange",function(r){return t.eBV(d),t.Njj(n.searchRecords("practiceLocation",r))}),t.mxI("ngModelChange",function(r){return t.eBV(d),t.DH7(n.practiceLocationsVal,r)||(n.practiceLocationsVal=r),t.Njj(r)}),t.j41(12,"option",13),t.EFF(13,"Practice Location"),t.k0s(),t.DNE(14,N,2,2,"option",14),t.k0s()()(),t.j41(15,"div",10)(16,"div",11)(17,"select",12),t.bIt("ngModelChange",function(r){return t.eBV(d),t.Njj(n.searchRecords("status",r))}),t.mxI("ngModelChange",function(r){return t.eBV(d),t.DH7(n.appStatusVal,r)||(n.appStatusVal=r),t.Njj(r)}),t.j41(18,"option",13),t.EFF(19,"Appointment Status"),t.k0s(),t.DNE(20,X,2,2,"option",14),t.k0s()()(),t.j41(21,"div",10)(22,"div",11)(23,"div",15)(24,"mat-form-field",16)(25,"input",17),t.mxI("ngModelChange",function(r){return t.eBV(d),t.DH7(n.toDate,r)||(n.toDate=r),t.Njj(r)}),t.bIt("dateChange",function(r){return t.eBV(d),t.Njj(n.onDateChange(r))})("focus",function(){t.eBV(d);const r=t.sdS(28);return t.Njj(r.open())}),t.k0s(),t.nrm(26,"mat-datepicker-toggle",18)(27,"mat-datepicker",null,0),t.k0s()()()(),t.j41(29,"div",10)(30,"div",11)(31,"button",19),t.bIt("click",function(){return t.eBV(d),t.Njj(n.reset())}),t.EFF(32,"Reset Filter"),t.k0s()()()()()(),t.DNE(33,C,20,9,"div",20)(34,V,6,3,"div",21),t.k0s()()()}if(2&g){const d=t.sdS(28);t.R7$(11),t.R50("ngModel",n.practiceLocationsVal),t.R7$(3),t.Y8G("ngForOf",n.practiceLocations),t.R7$(3),t.R50("ngModel",n.appStatusVal),t.R7$(3),t.Y8G("ngForOf",n.appointmentStatus),t.R7$(5),t.R50("ngModel",n.toDate),t.Y8G("min",n.minToDate)("max",n.maxToDate)("matDatepicker",d),t.R7$(),t.Y8G("for",d),t.R7$(7),t.Y8G("ngIf",n.dayTwo),t.R7$(),t.Y8G("ngIf",n.dayOne)}},dependencies:[R.Sq,R.bT,M.xH,M.y7,M.me,M.wz,M.BC,M.vS,W.$z,S.Vh,S.bZ,S.bU,T.rl,T.yw,L.An,z.fg,Y.iy,B.B4,B.aE,b.Zl,b.tL,b.ji,b.cC,b.YV,b.iL,b.KS,b.$R,b.YZ,b.NB,R.vh],styles:[".day--one--wrapper[_ngcontent-%COMP%]{height:calc(100vh - 287px)}.day--one--wrapper[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px}  .cust--mat--table tbody tr td:last-child .mat-icon{height:24px;width:24px;font-size:24px}  .cust--mat--table tbody tr td .img--box{width:48px;height:48px;border-radius:100%;overflow:hidden;margin-right:15px}@media only screen and (max-width: 599px){.day--one--wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80px}.day--one--wrapper[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}.cust--mat--table--wrapper[_ngcontent-%COMP%]   .cust--mat--table.box--row--table.mat-mdc-table[_ngcontent-%COMP%]{width:800px}}@media only screen and (min-width: 600px) and (max-width: 979px){.day--one--wrapper[_ngcontent-%COMP%]{height:auto}.day--one--wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80px;margin-top:70px}.day--one--wrapper[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}}@media screen and (orientation: landscape) and (max-width: 850px){.day--one--wrapper[_ngcontent-%COMP%]{height:auto}.day--one--wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80px;margin-top:70px}.day--one--wrapper[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}.cust--mat--table--wrapper[_ngcontent-%COMP%]   .cust--mat--table.box--row--table.mat-mdc-table[_ngcontent-%COMP%]{width:900px}}"]})}return c})()},263:(q,$,i)=>{i.d($,{_:()=>g});var A=i(4523),b=i(9159),P=i(5802),_=i(446),t=i(4438),U=i(4006),j=i(2168),G=i(6992),k=i(3390),K=i(758),R=i(177),M=i(9417),W=i(8834),S=i(2765),T=i(5084),L=i(2102),z=i(9213),Y=i(9631),B=i(6695),N=i(2042);const X=()=>["/support-team/create-appointment"];function H(n,d){if(1&n&&(t.j41(0,"option",30),t.EFF(1),t.k0s()),2&n){const e=d.$implicit;t.FS9("value",e),t.R7$(),t.SpI("",e," ")}}function Q(n,d){if(1&n&&(t.j41(0,"option",30),t.EFF(1),t.k0s()),2&n){const e=d.$implicit;t.FS9("value",e),t.R7$(),t.SpI("",e," ")}}function Z(n,d){1&n&&(t.j41(0,"th",47),t.EFF(1," Case Details "),t.k0s())}function y(n,d){if(1&n&&(t.j41(0,"td",48)(1,"div",49)(2,"div",50),t.nrm(3,"img",51),t.k0s(),t.j41(4,"div")(5,"p",52),t.EFF(6),t.k0s(),t.j41(7,"p",53)(8,"span",54),t.EFF(9,"Patient"),t.k0s(),t.EFF(10),t.k0s(),t.j41(11,"p",53)(12,"span",54),t.EFF(13,"Case Name"),t.k0s(),t.EFF(14),t.k0s()()()()),2&n){const e=d.$implicit;t.R7$(3),t.FS9("src",e.profileImage,t.B4B),t.R7$(3),t.SpI(" ",e.practiceLocation?e.practiceLocation:""," "),t.R7$(4),t.SpI(" ",e.patientName," "),t.R7$(4),t.SpI(" ",e.caseName?e.caseName:"N/A"," ")}}function O(n,d){1&n&&(t.j41(0,"th",55),t.EFF(1," Appointment Date "),t.k0s())}function E(n,d){if(1&n&&(t.j41(0,"td",48),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&n){const e=d.$implicit;t.R7$(),t.SpI(" ",t.i5U(2,1,e.appointmentDate,"mediumDate")," ")}}function m(n,d){1&n&&(t.j41(0,"th",56),t.EFF(1," Status "),t.k0s())}function D(n,d){if(1&n&&(t.j41(0,"td",48)(1,"p"),t.EFF(2),t.k0s()()),2&n){const e=d.$implicit;t.R7$(),t.ZvI("status ",e.statusFlag,""),t.R7$(),t.JRh(e.status)}}function o(n,d){1&n&&(t.j41(0,"th",56),t.EFF(1," Patient Check in Status "),t.k0s())}function h(n,d){if(1&n){const e=t.RV6();t.j41(0,"td",48)(1,"mat-checkbox",57),t.bIt("change",function(a){const p=t.eBV(e).$implicit,f=t.XpG(2);return t.Njj(f.patientCheckIn(a,p))}),t.mxI("ngModelChange",function(a){const p=t.eBV(e).$implicit;return t.DH7(p.checkIn,a)||(p.checkIn=a),t.Njj(a)}),t.EFF(2,"Patient Check in Status"),t.k0s()()}if(2&n){const e=d.$implicit;t.R7$(),t.R50("ngModel",e.checkIn)}}function u(n,d){1&n&&(t.j41(0,"th",56),t.EFF(1," Actions "),t.k0s())}function C(n,d){if(1&n){const e=t.RV6();t.j41(0,"td",48)(1,"div",58)(2,"button",59),t.bIt("click",function(){const a=t.eBV(e).$implicit,p=t.XpG(2);return t.Njj(p.navigateToappointmentDetails(a.id))}),t.j41(3,"mat-icon",60),t.EFF(4,"visibility "),t.k0s()()()()}}function I(n,d){1&n&&t.nrm(0,"tr",61)}function x(n,d){1&n&&t.nrm(0,"tr",62)}function F(n,d){if(1&n&&(t.j41(0,"div",63)(1,"div",64),t.nrm(2,"img",65),t.j41(3,"p",66),t.EFF(4),t.k0s()()()),2&n){const e=t.XpG(2);t.R7$(4),t.JRh(e.validationMessages.noRecords)}}function V(n,d){if(1&n){const e=t.RV6();t.j41(0,"div",31)(1,"div",32)(2,"table",33),t.bIt("matSortChange",function(a){t.eBV(e);const p=t.XpG();return t.Njj(p.announceSortChange(a))}),t.qex(3,34),t.DNE(4,Z,2,0,"th",35)(5,y,15,4,"td",36),t.bVm(),t.qex(6,37),t.DNE(7,O,2,0,"th",38)(8,E,3,4,"td",36),t.bVm(),t.qex(9,39),t.DNE(10,m,2,0,"th",40)(11,D,3,4,"td",36),t.bVm(),t.qex(12,41),t.DNE(13,o,2,0,"th",40)(14,h,3,1,"td",36),t.bVm(),t.qex(15,42),t.DNE(16,u,2,0,"th",40)(17,C,5,0,"td",36),t.bVm(),t.DNE(18,I,1,0,"tr",43)(19,x,1,0,"tr",44),t.k0s(),t.DNE(20,F,5,1,"div",45),t.j41(21,"mat-paginator",46,2),t.bIt("page",function(a){t.eBV(e);const p=t.XpG();return t.Njj(p.handlePageEvent(a))}),t.k0s()()()}if(2&n){const e=t.XpG();t.R7$(2),t.Y8G("dataSource",e.appointmentsList),t.R7$(16),t.Y8G("matHeaderRowDef",e.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",e.displayedColumns),t.R7$(),t.Y8G("ngIf",e.appointmentsList&&0==e.appointmentsList.filteredData.length),t.R7$(),t.Y8G("length",e.totalCount)("pageSize",e.pageSize)("showFirstLastButtons",!0)("pageSizeOptions",e.pageSizeOptions)("pageIndex",e.pageIndex)}}function J(n,d){1&n&&(t.j41(0,"p",72),t.EFF(1,"No Records Found!"),t.k0s())}function tt(n,d){1&n&&(t.j41(0,"p",72),t.EFF(1," Currently there are no appointments to show! "),t.k0s())}function c(n,d){1&n&&(t.j41(0,"p",73),t.EFF(1," Kindly click on \u201cBook Appointment\u201d to schedule a new appointment. "),t.k0s())}function v(n,d){if(1&n&&(t.j41(0,"div",67)(1,"div",68),t.nrm(2,"img",69),t.DNE(3,J,2,0,"p",70)(4,tt,2,0,"p",70)(5,c,2,0,"p",71),t.k0s()()),2&n){const e=t.XpG();t.R7$(3),t.Y8G("ngIf",!e.dayOneFlag),t.R7$(),t.Y8G("ngIf",e.dayOneFlag),t.R7$(),t.Y8G("ngIf",e.dayOneFlag)}}const s=[];let g=(()=>{class n{constructor(e,r,a,p,f,l){this.dialog=e,this.router=r,this.authService=a,this.commonService=p,this.adminService=f,this.route=l,this.displayedColumns=["name","appointmentDate","status","patientcheckstatus","action"],this.dataSource=new b.I6(s),this.orderBy={updatedAt:-1},this.whereCond={},this.userQuery={},this.dayTwo=!1,this.dayOne=!0,this.dayOneFlag=!0,this.totalCount=0,this.pageIndex=0,this.pageSize=_.T0,this.pageSizeOptions=_.Xe,this.searchQuery="",this.practiceLocations=_.WM,this.appointmentStatus=_.K0,this.validationMessages=P.q,this.appStatusVal="",this.practiceLocationsVal="",this.toDate="",this.fromDate="",this.selectedFromDate="",this.selectedToDate="",this.seachByName="",this.seachById="",this.fieldValues=["Accepted","Rescheduled"],this.seachByPatientNameOrEmail="",this.patientQuery={},this.minToDate=null,this.maxToDate=null}ngOnInit(){this.userBasedQueryChanged(),this.getAppointmentList("")}userBasedQueryChanged(){this.authService.getLoggedInInfo("role")}searchRecords(e,r){let a=e.target.value.trim();if(""!=a){a=a.replace("+","\\+");let p={$regex:a,$options:"i"};if("byName"==r)this.userQuery={status:"Active",role:"therapist",$or:[{firstName:p},{lastName:p},{email:p}]};else if("byId"==r)this.whereCond=Object.assign(this.whereCond,{caseName:{$regex:a,$options:"i"}});else if("byPatientNameOrEmail"==r){let f=p,l=p,w=a.trim().split(" ");w[0]&&w[1]&&(f={$regex:w[0],$options:"i"},l={$regex:w[1],$options:"i"}),this.patientQuery={status:"Active",$or:[{firstName:f},{lastName:l},{email:p}]}}}else this.userQuery={},this.whereCond={},this.patientQuery={};this.getAppointmentList("search")}selectRecords(e,r){r&&""!=r?Object.assign(this.whereCond,{[e]:{$in:r}}):delete this.whereCond[e],this.getAppointmentList("search")}reset(){this.totalCount=0,this.pageIndex=0,this.pageSize=_.T0,this.pageSizeOptions=_.Xe,this.fromDate="",this.toDate="",this.selectedFromDate="",this.selectedToDate="",this.practiceLocationsVal="",this.appStatusVal="",this.seachById="",this.seachByName="",this.whereCond={},this.seachByPatientNameOrEmail="",this.patientQuery={},this.getAppointmentList("reset")}onDateChange(e,r){let a=new Date(e.value),p={};if("fromDate"==r){p={$gte:a},this.selectedFromDate=a;const f=new Date(a);f.setDate(a.getDate()+1),this.minToDate=f}else{p={$lte:a},this.selectedToDate=a;const f=new Date(a);f.setDate(a.getDate()-1),this.maxToDate=f}this.selectedFromDate&&this.selectedToDate?(p={$gte:this.selectedFromDate,$lte:this.selectedToDate},Object.assign(this.whereCond,{appointmentDate:p})):Object.assign(this.whereCond,{appointmentDate:p}),this.getAppointmentList("search")}getAppointmentList(e=""){var r=this;return(0,A.A)(function*(){""==e&&r.commonService.showLoader();let a={query:r.whereCond,userQuery:r.userQuery,patientQuery:r.patientQuery,fields:{_id:1,patientId:1,therapistId:1,appointmentId:1,status:1,caseName:1,createdAt:1,updatedAt:1,practiceLocation:1,appointmentDate:1,checkIn:1},patientFields:{firstName:1,lastName:1,email:1,status:1,profileImage:1,practiceLocation:1},order:r.orderBy,limit:r.pageSize,offset:r.pageIndex*r.pageSize};yield r.authService.apiRequest("post","appointment/getAppointmentList",a).subscribe(function(){var p=(0,A.A)(function*(f){r.commonService.hideLoader(),r.totalCount=f.data.totalCount;let l=[];f.data.appointmentList.length>0&&(yield f.data.appointmentList.map(w=>{let et={id:w._id,practiceLocation:w.practiceLocation,appointmentId:w.appointmentId,checkIn:w.checkIn,createdAt:w.updatedAt,appointmentDate:w.appointmentDate,status:w.status,caseName:w.caseName,statusFlag:w.status.charAt(0).toLowerCase()+w.status.slice(1),patientName:w.patientId?.firstName+" "+w.patientId?.lastName,profileImage:_.ns.awsS3Url+_.ns.userProfileFolderPath+w.patientId?.profileImage,therapistName:w.therapistId?.firstName+" "+w.therapistId?.lastName};l.push(et)})),r.totalCount>0&&(r.dayTwo=!0,r.dayOne=!1),r.appointmentsList=new b.I6(l)});return function(f){return p.apply(this,arguments)}}())})()}handlePageEvent(e){this.pageSize=e.pageSize,this.pageIndex=e.pageIndex,this.getAppointmentList()}announceSortChange(e){let r;r="desc"==e.direction?-1:1,this.orderBy="name"==e.active?{caseName:r}:{[e.active]:r},this.getAppointmentList()}patientCheckIn(e,r){var a=this;return(0,A.A)(function*(){if(null!=e.source._checked){let p={query:{_id:r.id},updateInfo:{checkIn:e.source._checked}};yield a.authService.apiRequest("post","appointment/updatePatientCheckIn",p).subscribe(function(){var f=(0,A.A)(function*(l){});return function(l){return f.apply(this,arguments)}}())}})()}navigateToappointmentDetails(e){this.router.navigate([this.commonService.getLoggedInRoute(),"case-details",e])}static#t=this.\u0275fac=function(r){return new(r||n)(t.rXU(U.bZ),t.rXU(j.Ix),t.rXU(G.u),t.rXU(k.h),t.rXU(K.z),t.rXU(j.nX))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-appointments"]],decls:65,vars:19,consts:[["picker",""],["picker2",""],["paginator",""],[1,"col-12","appointment--wrapper"],[1,"col-12"],[1,"card"],[1,"card-header","pb-0"],[1,"col-12","d-flex","align-items-center","justify-content-between","mb-3"],[1,"mb-0","clr--1F2F3E"],["mat-raised-button","","color","primary",3,"routerLink"],[1,"material-symbols-outlined","flex-shrink-0"],[1,"col-12","mt-3"],[1,"row"],[1,"col-12","col-sm-6","col-lg-3"],[1,"form-group"],["aria-label","Default select example",1,"form-select","form-control",3,"ngModelChange","ngModel"],["selected","","value",""],[3,"value",4,"ngFor","ngForOf"],["type","text","placeholder","Case Name",1,"form-control","search--outer",3,"ngModelChange","keyup","ngModel"],["mat-button","",1,"p-0","flex-shrink-0","min-width-unset","search--fields"],["type","text","placeholder","Patient Name or email",1,"form-control","search--outer",3,"ngModelChange","keyup","ngModel"],["type","text","placeholder","Therapist Name",1,"form-control","search--outer",3,"ngModelChange","keyup","ngModel"],[1,"input-group"],[1,"w-100","am--datepicker"],["name","dp","readonly","isReadonly","placeholder","From Date","matInput","",3,"ngModelChange","dateChange","focus","ngModel","matDatepicker","max"],["matIconSuffix","",3,"for"],["name","dp2","readonly","isReadonly","placeholder","To Date","matInput","",3,"ngModelChange","dateChange","focus","ngModel","matDatepicker","min"],["mat-stroked-button","","color","primary",3,"click"],["class","card-body",4,"ngIf"],["class","card-body day--one--wrapper d-flex align-items-center justify-content-center",4,"ngIf"],[3,"value"],[1,"card-body"],[1,"col-12","cust--mat--table--wrapper"],["mat-table","","matSort","",1,"cust--mat--table","box--row--table",3,"matSortChange","dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by number",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","appointmentDate"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by weight",4,"matHeaderCellDef"],["matColumnDef","status"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by symbol",4,"matHeaderCellDef"],["matColumnDef","patientcheckstatus"],["matColumnDef","action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","no--record--found align-items-center justify-content-center w-100",4,"ngIf"],[3,"page","length","pageSize","showFirstLastButtons","pageSizeOptions","pageIndex"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by number"],["mat-cell",""],[1,"d-flex","align-items-center"],[1,"img--box","flex-shrink-0"],["alt","Patient Profile Pic",1,"img-fluid",3,"src"],[1,"mb-0","font-16","text-primary","clr--1F2F3E","fw-500"],[1,"mb-0","font-14","text-primary","clr--1F2F3E"],[1,"fw-700"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by weight"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by symbol"],[1,"",3,"change","ngModelChange","ngModel"],[1,"w-100","d-flex","align-items-center","justify-content-end"],["mat-button","",1,"flex-shrink-0","min-width-unset","search--fields",3,"click"],[1,"material-symbols-outlined","flex-shrink-0","m-0","text-primary"],["mat-header-row",""],["mat-row",""],[1,"no--record--found","align-items-center","justify-content-center","w-100"],[1,"d-flex","flex-column","align-items-center","w-100"],["src","assets/images/ark/sad.png","alt","",1,"mb-3","sad--img"],[1,""],[1,"card-body","day--one--wrapper","d-flex","align-items-center","justify-content-center"],[1,"d-flex","flex-column","align-items-center","justify-content-center","w-100"],["src","assets/images/ark/calendar-lg.png","alt","",1,"img-fluid","mb-4"],["class","fw-700 clr--1F2F3E text-center mb-2",4,"ngIf"],["class","clr--1F2F3E text-center",4,"ngIf"],[1,"fw-700","clr--1F2F3E","text-center","mb-2"],[1,"clr--1F2F3E","text-center"]],template:function(r,a){if(1&r){const p=t.RV6();t.j41(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"div",7)(5,"h3",8),t.EFF(6,"Cases"),t.k0s(),t.j41(7,"button",9)(8,"mat-icon",10),t.EFF(9," add_circle "),t.k0s(),t.EFF(10," Create Appointment "),t.k0s()(),t.j41(11,"div",11)(12,"div",12)(13,"div",13)(14,"div",14)(15,"select",15),t.bIt("ngModelChange",function(l){return t.eBV(p),t.Njj(a.selectRecords("practiceLocation",l))}),t.mxI("ngModelChange",function(l){return t.eBV(p),t.DH7(a.practiceLocationsVal,l)||(a.practiceLocationsVal=l),t.Njj(l)}),t.j41(16,"option",16),t.EFF(17,"Practice Location"),t.k0s(),t.DNE(18,H,2,2,"option",17),t.k0s()()(),t.j41(19,"div",13)(20,"div",14)(21,"input",18),t.mxI("ngModelChange",function(l){return t.eBV(p),t.DH7(a.seachById,l)||(a.seachById=l),t.Njj(l)}),t.bIt("keyup",function(l){return t.eBV(p),t.Njj(a.searchRecords(l,"byId"))}),t.k0s(),t.j41(22,"button",19)(23,"mat-icon",10),t.EFF(24,"search "),t.k0s()()()(),t.j41(25,"div",13)(26,"div",14)(27,"input",20),t.mxI("ngModelChange",function(l){return t.eBV(p),t.DH7(a.seachByPatientNameOrEmail,l)||(a.seachByPatientNameOrEmail=l),t.Njj(l)}),t.bIt("keyup",function(l){return t.eBV(p),t.Njj(a.searchRecords(l,"byPatientNameOrEmail"))}),t.k0s(),t.j41(28,"button",19)(29,"mat-icon",10),t.EFF(30,"search "),t.k0s()()()(),t.j41(31,"div",13)(32,"div",14)(33,"input",21),t.mxI("ngModelChange",function(l){return t.eBV(p),t.DH7(a.seachByName,l)||(a.seachByName=l),t.Njj(l)}),t.bIt("keyup",function(l){return t.eBV(p),t.Njj(a.searchRecords(l,"byName"))}),t.k0s(),t.j41(34,"button",19)(35,"mat-icon",10),t.EFF(36,"search "),t.k0s()()()(),t.j41(37,"div",13)(38,"div",14)(39,"select",15),t.bIt("ngModelChange",function(l){return t.eBV(p),t.Njj(a.selectRecords("status",l))}),t.mxI("ngModelChange",function(l){return t.eBV(p),t.DH7(a.appStatusVal,l)||(a.appStatusVal=l),t.Njj(l)}),t.j41(40,"option",16),t.EFF(41,"Appointment Status"),t.k0s(),t.DNE(42,Q,2,2,"option",17),t.k0s()()(),t.j41(43,"div",13)(44,"div",14)(45,"div",22)(46,"mat-form-field",23)(47,"input",24),t.mxI("ngModelChange",function(l){return t.eBV(p),t.DH7(a.fromDate,l)||(a.fromDate=l),t.Njj(l)}),t.bIt("dateChange",function(l){return t.eBV(p),t.Njj(a.onDateChange(l,"fromDate"))})("focus",function(){t.eBV(p);const l=t.sdS(50);return t.Njj(l.open())}),t.k0s(),t.nrm(48,"mat-datepicker-toggle",25)(49,"mat-datepicker",null,0),t.k0s()()()(),t.j41(51,"div",13)(52,"div",14)(53,"div",22)(54,"mat-form-field",23)(55,"input",26),t.mxI("ngModelChange",function(l){return t.eBV(p),t.DH7(a.toDate,l)||(a.toDate=l),t.Njj(l)}),t.bIt("dateChange",function(l){return t.eBV(p),t.Njj(a.onDateChange(l,"toDate"))})("focus",function(){t.eBV(p);const l=t.sdS(58);return t.Njj(l.open())}),t.k0s(),t.nrm(56,"mat-datepicker-toggle",25)(57,"mat-datepicker",null,1),t.k0s()()()(),t.j41(59,"div",13)(60,"div",14)(61,"button",27),t.bIt("click",function(){return t.eBV(p),t.Njj(a.reset())}),t.EFF(62,"Reset Filter"),t.k0s()()()()()(),t.DNE(63,V,23,9,"div",28)(64,v,6,3,"div",29),t.k0s()()()}if(2&r){const p=t.sdS(50),f=t.sdS(58);t.R7$(7),t.Y8G("routerLink",t.lJ4(18,X)),t.R7$(8),t.R50("ngModel",a.practiceLocationsVal),t.R7$(3),t.Y8G("ngForOf",a.practiceLocations),t.R7$(3),t.R50("ngModel",a.seachById),t.R7$(6),t.R50("ngModel",a.seachByPatientNameOrEmail),t.R7$(6),t.R50("ngModel",a.seachByName),t.R7$(6),t.R50("ngModel",a.appStatusVal),t.R7$(3),t.Y8G("ngForOf",a.appointmentStatus),t.R7$(5),t.R50("ngModel",a.fromDate),t.Y8G("matDatepicker",p)("max",a.maxToDate),t.R7$(),t.Y8G("for",p),t.R7$(7),t.R50("ngModel",a.toDate),t.Y8G("matDatepicker",f)("min",a.minToDate),t.R7$(),t.Y8G("for",f),t.R7$(7),t.Y8G("ngIf",a.dayTwo),t.R7$(),t.Y8G("ngIf",a.dayOne)}},dependencies:[R.Sq,R.bT,M.xH,M.y7,M.me,M.wz,M.BC,M.vS,W.$z,S.So,T.Vh,T.bZ,T.bU,L.rl,L.yw,z.An,Y.fg,B.iy,N.B4,N.aE,b.Zl,b.tL,b.ji,b.cC,b.YV,b.iL,b.KS,b.$R,b.YZ,b.NB,j.Wk,R.vh],styles:[".appointment--wrapper .cust--mat--table tbody tr td:last-child .mat-icon{height:24px;width:24px;font-size:24px}  .appointment--wrapper .cust--mat--table tbody tr td .img--box{width:48px;height:48px;border-radius:100%;overflow:hidden;margin-right:15px}  .appointment--wrapper .cust--mat--table.box--row--table.mat-mdc-table thead tr th:nth-child(1){width:35%}  .appointment--wrapper .cust--mat--table.box--row--table.mat-mdc-table thead tr th:nth-child(2){width:28%}  .appointment--wrapper .cust--mat--table.box--row--table.mat-mdc-table thead tr th:nth-child(3){width:200px}  .appointment--wrapper .cust--mat--table.box--row--table.mat-mdc-table thead tr th:nth-child(4){width:250px}  .appointment--wrapper .cust--mat--table.box--row--table.mat-mdc-table thead tr th:nth-child(5){width:150px}  .appointment--wrapper .cust--mat--table.box--row--table.mat-mdc-table tbody tr td:nth-child(1){width:35%}  .appointment--wrapper .cust--mat--table.box--row--table.mat-mdc-table tbody tr td:nth-child(2){width:28%}  .appointment--wrapper .cust--mat--table.box--row--table.mat-mdc-table tbody tr td:nth-child(3){width:200px}  .appointment--wrapper .cust--mat--table.box--row--table.mat-mdc-table tbody tr td:nth-child(4){width:250px}  .appointment--wrapper .cust--mat--table.box--row--table.mat-mdc-table tbody tr td:nth-child(5){width:150px}@media only screen and (max-width: 599px){.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table{width:860px}.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table thead tr th:nth-child(1){width:30%}.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table thead tr th:nth-child(2){width:28%}.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table thead tr th:nth-child(3){width:200px}.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table thead tr th:nth-child(4){width:225px}.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table thead tr th:nth-child(5){width:225px}.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table tbody tr td:nth-child(1){width:30%}.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table tbody tr td:nth-child(2){width:28%}.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table tbody tr td:nth-child(3){width:200px}.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table tbody tr td:nth-child(4){width:225px}.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table tbody tr td:nth-child(5){width:225px}}@media only screen and (min-width: 1280px) and (max-width: 1440px){.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table thead tr th:nth-child(1){width:25%}.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table thead tr th:nth-child(2){width:28%}.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table thead tr th:nth-child(3){width:200px}.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table thead tr th:nth-child(4){width:250px}.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table thead tr th:nth-child(5){width:150px}.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table tbody tr td:nth-child(1){width:25%}.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table tbody tr td:nth-child(2){width:28%}.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table tbody tr td:nth-child(3){width:200px}.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table tbody tr td:nth-child(4){width:250px}.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table tbody tr td:nth-child(5){width:150px}}@media screen and (orientation: landscape) and (max-width: 850px){.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table tbody tr td:nth-child(1), .appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table thead tr th:nth-child(1){width:30%}.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table tbody tr td:last-child, .appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table thead tr th:last-child{width:16%}.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table tbody tr td:nth-child(3), .appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table thead tr th:nth-child(3){width:150px}}"]})}return n})()},1767:(q,$,i)=>{i.d($,{E:()=>E});var A=i(4523),b=i(6695),P=i(2042),_=i(9159),t=i(4438),U=i(8617),j=i(4006),G=i(6992),k=i(2168),K=i(3390),R=i(177),M=i(9417),W=i(8834),S=i(9213);const T=()=>[5,10,20];function L(m,D){if(1&m){const o=t.RV6();t.j41(0,"li",30)(1,"a",31),t.bIt("click",function(){const u=t.eBV(o).$implicit,C=t.XpG();return t.Njj(C.backToDirectory(u))}),t.EFF(2),t.k0s()()}if(2&m){const o=D.$implicit;t.R7$(2),t.JRh(o.name)}}function z(m,D){1&m&&(t.j41(0,"th",32),t.EFF(1," Name "),t.k0s())}function Y(m,D){if(1&m){const o=t.RV6();t.j41(0,"td",33),t.bIt("click",function(){const u=t.eBV(o).$implicit,C=t.XpG();return t.Njj(C.gotoDirectory(u._id,u.icon,u.name))}),t.j41(1,"div",34)(2,"mat-icon",35),t.EFF(3),t.k0s(),t.j41(4,"p",36),t.EFF(5),t.k0s()()()}if(2&m){const o=D.$implicit;t.R7$(3),t.SpI(" ",o.icon,""),t.R7$(2),t.JRh(o.name)}}function B(m,D){1&m&&(t.j41(0,"th",37),t.EFF(1," Action "),t.k0s())}function N(m,D){if(1&m){const o=t.RV6();t.j41(0,"button",41),t.bIt("click",function(){t.eBV(o);const u=t.XpG().$implicit,C=t.XpG();return t.Njj(C.previewFile(u._id))}),t.j41(1,"mat-icon",42),t.EFF(2,"visibility "),t.k0s()()}}function X(m,D){if(1&m){const o=t.RV6();t.j41(0,"button",41),t.bIt("click",function(){t.eBV(o);const u=t.XpG().$implicit,C=t.XpG();return t.Njj(C.downloadFile(u._id))}),t.j41(1,"mat-icon",42),t.EFF(2,"download "),t.k0s()()}}function H(m,D){if(1&m&&(t.j41(0,"td",38)(1,"div",39),t.DNE(2,N,3,0,"button",40)(3,X,3,0,"button",40),t.k0s()()),2&m){const o=D.$implicit;t.R7$(2),t.Y8G("ngIf","folder"!=o.icon),t.R7$(),t.Y8G("ngIf","folder"!=o.icon)}}function Q(m,D){1&m&&t.nrm(0,"tr",43)}function Z(m,D){1&m&&t.nrm(0,"tr",44)}function y(m,D){1&m&&(t.j41(0,"div",45)(1,"div",46),t.nrm(2,"img",47),t.j41(3,"p",48),t.EFF(4,"No Records found"),t.k0s()()())}const O=[];let E=(()=>{class m{constructor(o,h,u,C,I){this._liveAnnouncer=o,this.dialog=h,this.authService=u,this.route=C,this.commonService=I,this.displayedColumns=["name","actions"],this.dataSource=new _.I6(O),this.loading=!1,this.arrLength=0,this.searchItem="",this.listArrayItems=[],this.userId="",this.userType="",this.pathValues=[],this.tempPathValues=[],this.dirId=this.route.snapshot.paramMap.get("id"),this.userId=this.authService.getLoggedInInfo("_id"),this.userType=this.authService.getLoggedInInfo("role").replace("_","-");var x=localStorage.getItem("pathValues");this.tempPathValues=x&&null!=x?JSON.parse(x):[],this.tempPathValues.forEach(F=>{this.pathValues.push(F)}),this.getDirectoryItems()}getDirectoryItems(){var o=this;this.loading=!0;var h={directory:this.dirId,searchValue:this.searchItem.trim()};this.authService.apiRequest("post","admin/getDirectoryItems",h).subscribe(function(){var u=(0,A.A)(function*(C){o.loading=!1,o.listArrayItems=[],C.data.directoryList.forEach(I=>{o.listArrayItems.push({_id:I._id,name:I.directory_name,actions:"",icon:"folder",color:"description"})}),C.data.fileList.forEach(I=>{var x=I.file_name.split(".").pop(),F="",V="";"pdf"==x?(F="picture_as_pdf",V="pdf"):"png"==x||"jpg"==x||"jpeg"==x?(F="photo",V="photo"):(F="description",V="description"),o.listArrayItems.push({_id:I._id,name:I.file_name,actions:"",icon:F,color:V})}),o.arrLength=o.listArrayItems.length,o.dataSource.data=o.listArrayItems,o.dataSource.paginator=o.paginator});return function(C){return u.apply(this,arguments)}}())}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}announceSortChange(o){this._liveAnnouncer.announce(o.direction?`Sorted ${o.direction}ending`:"Sorting cleared")}previewFile(o){window.open(`${window.location.origin}/${this.userType}/file-preview/`+o,"_blank")}gotoDirectory(o,h,u){this.dirId=o,"folder"==h&&(this.tempPathValues.push({link:"/document-details/"+o,name:u}),localStorage.setItem("pathValues",JSON.stringify(this.tempPathValues)),window.open(`${window.location.origin}/${this.userType}/document-details/`+o,"_self"))}searchRecords(){this.getDirectoryItems()}downloadFile(o){this.authService.apiRequest("post","admin/previewDocumentFile",{fileId:o}).subscribe(function(){var u=(0,A.A)(function*(C){window.open(`${C.data.previewUrl}`,"_blank")});return function(C){return u.apply(this,arguments)}}())}removeElementsFromIndex(o,h){return h<0||h>=o.length||o.splice(h),o}backToDirectory(o){var h=this;return(0,A.A)(function*(){var u=h.pathValues.findIndex(C=>C.name===o.name);h.tempPathValues=yield h.removeElementsFromIndex(h.pathValues,u+1),localStorage.setItem("pathValues",JSON.stringify(h.tempPathValues)),window.open(`${window.location.origin}/${h.userType}`+o.link,"_self")})()}static#t=this.\u0275fac=function(h){return new(h||m)(t.rXU(U.Ai),t.rXU(j.bZ),t.rXU(G.u),t.rXU(k.nX),t.rXU(K.h))};static#e=this.\u0275cmp=t.VBU({type:m,selectors:[["app-document-detailing"]],viewQuery:function(h,u){if(1&h&&(t.GBs(P.B4,5),t.GBs(b.iy,5)),2&h){let C;t.mGM(C=t.lsd())&&(u.sort=C.first),t.mGM(C=t.lsd())&&(u.paginator=C.first)}},decls:32,vars:10,consts:[[1,"col-12","document--detailing--wrapper"],[1,"card"],[1,"card-header","pb-0"],[1,"col-12","d-flex","align-items-center","mb-2"],[1,"row","w-100","align-items-center"],[1,"col-12","col-sm-6","col-lg-6","d-flex"],["mat-stroked-button","","color","primary",1,"me-3","back--btn",3,"routerLink"],[1,"material-symbols-outlined","flex-shrink-0","m-0"],[1,"form-group","mb-0","position-relative","w-100"],["type","text","placeholder","Search ",1,"form-control","search--outer",3,"keyup","ngModelChange","ngModel"],["mat-button","",1,"p-0","flex-shrink-0","min-width-unset","search--fields",3,"click"],[1,"material-symbols-outlined","flex-shrink-0"],[1,"col-12","col-sm-6","col-lg-6","d-flex","justify-content-end"],["aria-label","breadcrumb"],[1,"breadcrumb","mb-0","d-flex","align-items-center"],["class","breadcrumb-item fw-500","style","cursor: pointer;",4,"ngFor","ngForOf"],[1,"card-body"],[1,"row"],[1,"col-12","cust--mat--table--wrapper"],["mat-table","","matSort","",1,"cust--mat--table",3,"matSortChange","dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by number",4,"matHeaderCellDef"],["class","","mat-cell","",3,"click",4,"matCellDef"],["matColumnDef","actions"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by weight",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","no--record--found d-flex align-items-center justify-content-center w-100",4,"ngIf"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"pageSizeOptions"],[1,"breadcrumb-item","fw-500",2,"cursor","pointer"],[1,"font-12","clr--1F2F3E",3,"click"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by number"],["mat-cell","",1,"",3,"click"],[1,"d-flex","align-items-center"],[1,"me-3","cursor-pointer"],[1,"font-14","clr--292D32","cursor-pointer"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by weight"],["mat-cell",""],[1,"w-100","d-flex","align-items-center","justify-content-end"],["mat-button","","class","flex-shrink-0 min-width-unset search--fields",3,"click",4,"ngIf"],["mat-button","",1,"flex-shrink-0","min-width-unset","search--fields",3,"click"],[1,"material-symbols-outlined","flex-shrink-0","m-0","text-primary"],["mat-header-row",""],["mat-row",""],[1,"no--record--found","d-flex","align-items-center","justify-content-center","w-100"],[1,"d-flex","flex-column","align-items-center","w-100"],["src","assets/images/ark/sad.png","alt","",1,"mb-3","sad--img"],[1,""]],template:function(h,u){1&h&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"button",6)(7,"mat-icon",7),t.EFF(8," keyboard_backspace "),t.k0s()(),t.j41(9,"div",8)(10,"input",9),t.bIt("keyup",function(){return u.searchRecords()}),t.mxI("ngModelChange",function(I){return t.DH7(u.searchItem,I)||(u.searchItem=I),I}),t.k0s(),t.j41(11,"button",10),t.bIt("click",function(){return u.searchRecords()}),t.j41(12,"mat-icon",11),t.EFF(13,"search "),t.k0s()()()(),t.j41(14,"div",12)(15,"nav",13)(16,"ol",14),t.DNE(17,L,3,1,"li",15),t.k0s()()()()()(),t.j41(18,"div",16)(19,"div",17)(20,"div",18)(21,"table",19),t.bIt("matSortChange",function(I){return u.announceSortChange(I)}),t.qex(22,20),t.DNE(23,z,2,0,"th",21)(24,Y,6,2,"td",22),t.bVm(),t.qex(25,23),t.DNE(26,B,2,0,"th",24)(27,H,4,2,"td",25),t.bVm(),t.DNE(28,Q,1,0,"tr",26)(29,Z,1,0,"tr",27),t.k0s(),t.DNE(30,y,5,0,"div",28),t.nrm(31,"mat-paginator",29),t.k0s()()()()()),2&h&&(t.R7$(6),t.Mz_("routerLink","/",u.userType,"/document-listing"),t.R7$(4),t.R50("ngModel",u.searchItem),t.R7$(7),t.Y8G("ngForOf",u.pathValues),t.R7$(4),t.Y8G("dataSource",u.dataSource),t.R7$(7),t.Y8G("matHeaderRowDef",u.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",u.displayedColumns),t.R7$(),t.Y8G("ngIf",0==u.arrLength&&!u.loading),t.R7$(),t.Y8G("pageSizeOptions",t.lJ4(9,T)))},dependencies:[R.Sq,R.bT,M.me,M.BC,M.vS,W.$z,S.An,b.iy,P.B4,P.aE,_.Zl,_.tL,_.ji,_.cC,_.YV,_.iL,_.KS,_.$R,_.YZ,_.NB,k.Wk],styles:[".document--detailing--wrapper[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .back--btn[_ngcontent-%COMP%]{min-width:42px}.document--detailing--wrapper[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .back--btn[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{width:24px;height:24px;font-size:24px}.document--detailing--wrapper[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .search--fields[_ngcontent-%COMP%]{right:6px}.document--detailing--wrapper[_ngcontent-%COMP%]     table tbody tr td{padding:12px 10px!important}.document--detailing--wrapper[_ngcontent-%COMP%]     table tbody tr td:first-child .mat-icon{color:#31b7b7;flex-shrink:0}.document--detailing--wrapper[_ngcontent-%COMP%]     table tbody tr td:last-child .mat-icon{height:24px;width:24px;font-size:24px;color:#31b7b7}"]})}return m})()},9153:(q,$,i)=>{i.d($,{Z:()=>Z});var A=i(4523),b=i(6695),P=i(2042),_=i(9159),t=i(4438),U=i(8617),j=i(4006),G=i(6992),k=i(3390),K=i(177),R=i(9417),M=i(8834),W=i(9213),S=i(2168);const T=()=>[5,10,20];function L(y,O){1&y&&(t.j41(0,"th",25),t.EFF(1," Name "),t.k0s())}function z(y,O){if(1&y){const E=t.RV6();t.j41(0,"td",26),t.bIt("click",function(){const D=t.eBV(E).$implicit,o=t.XpG();return t.Njj(o.gotoDirectory(D.directory_name,D._id))}),t.j41(1,"div",27)(2,"mat-icon",28),t.EFF(3,"folder"),t.k0s(),t.j41(4,"p",29),t.EFF(5),t.k0s()()()}if(2&y){const E=O.$implicit,m=t.XpG();t.FCK("routerLink","/",m.userType,"/document-details/",E._id,""),t.R7$(5),t.JRh(E.directory_name)}}function Y(y,O){1&y&&t.nrm(0,"th",30)}function B(y,O){if(1&y&&(t.j41(0,"td",31),t.EFF(1),t.k0s()),2&y){const E=O.$implicit;t.R7$(),t.SpI(" ",E.actions," ")}}function N(y,O){1&y&&t.nrm(0,"tr",32)}function X(y,O){1&y&&t.nrm(0,"tr",33)}function H(y,O){1&y&&(t.j41(0,"div",34)(1,"div",35),t.nrm(2,"img",36),t.j41(3,"p",37),t.EFF(4,"No Records found"),t.k0s()()())}const Q=[];let Z=(()=>{class y{constructor(E,m,D,o){this._liveAnnouncer=E,this.dialog=m,this.authService=D,this.commonService=o,this.displayedColumns=["directory_name","actions"],this.dataSource=new _.I6(Q),this.searchDirectory="",this.loading=!1,this.arrLength=0,this.userType="",this.pathValues=[],this.userType=this.authService.getLoggedInInfo("role").replace("_","-"),this.pathValues.push({link:"/document-listing",name:"Documents"}),this.getDefaultDirectories()}getDefaultDirectories(){var E=this;this.loading=!0;var m=this.authService.getLoggedInInfo("_id"),D=this.authService.getLoggedInInfo("role"),o={searchValue:this.searchDirectory.trim(),userRole:D,userId:m};this.authService.apiRequest("post","admin/getDefaultDirectories",o).subscribe(function(){var h=(0,A.A)(function*(u){E.loading=!1;var C=u.data.directoryList;E.arrLength=C.length,E.dataSource.data=C,E.dataSource.paginator=E.paginator});return function(u){return h.apply(this,arguments)}}())}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}announceSortChange(E){this._liveAnnouncer.announce(E.direction?`Sorted ${E.direction}ending`:"Sorting cleared")}searchRecords(){this.getDefaultDirectories()}gotoDirectory(E,m){this.pathValues.push({link:"/document-details/"+m,name:E}),localStorage.setItem("pathValues",JSON.stringify(this.pathValues))}static#t=this.\u0275fac=function(m){return new(m||y)(t.rXU(U.Ai),t.rXU(j.bZ),t.rXU(G.u),t.rXU(k.h))};static#e=this.\u0275cmp=t.VBU({type:y,selectors:[["app-document-listing"]],viewQuery:function(m,D){if(1&m&&(t.GBs(P.B4,5),t.GBs(b.iy,5)),2&m){let o;t.mGM(o=t.lsd())&&(D.sort=o.first),t.mGM(o=t.lsd())&&(D.paginator=o.first)}},decls:28,vars:7,consts:[[1,"col-12","document--wrapper"],[1,"card"],[1,"card-header","pb-0"],[1,"col-12","d-flex","align-items-center","justify-content-between","mb-3"],[1,"mb-0","clr--1F2F3E"],[1,"col-12","mt-2"],[1,"row"],[1,"col-12","col-sm-6","col-lg-6"],[1,"form-group"],["type","text","placeholder","Search ",1,"form-control","search--outer",3,"keyup","ngModelChange","ngModel"],["mat-button","",1,"p-0","flex-shrink-0","min-width-unset","search--fields",3,"click"],[1,"material-symbols-outlined","flex-shrink-0"],[1,"card-body"],[1,"col-12","cust--mat--table--wrapper"],["mat-table","","matSort","",1,"cust--mat--table",3,"matSortChange","dataSource"],["matColumnDef","directory_name"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by number",4,"matHeaderCellDef"],["mat-cell","",3,"routerLink","click",4,"matCellDef"],["matColumnDef","actions"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by weight",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","no--record--found d-flex align-items-center justify-content-center w-100",4,"ngIf"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by number"],["mat-cell","",3,"click","routerLink"],[1,"d-flex","align-items-center"],[1,"me-3","cursor-pointer"],[1,"font-14","clr--292D32","cursor-pointer"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by weight"],["mat-cell",""],["mat-header-row",""],["mat-row",""],[1,"no--record--found","d-flex","align-items-center","justify-content-center","w-100"],[1,"d-flex","flex-column","align-items-center","w-100"],["src","assets/images/ark/sad.png","alt","",1,"mb-3","sad--img"],[1,""]],template:function(m,D){1&m&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),t.EFF(5,"Documents"),t.k0s()(),t.j41(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"input",9),t.bIt("keyup",function(){return D.searchRecords()}),t.mxI("ngModelChange",function(h){return t.DH7(D.searchDirectory,h)||(D.searchDirectory=h),h}),t.k0s(),t.j41(11,"button",10),t.bIt("click",function(){return D.searchRecords()}),t.j41(12,"mat-icon",11),t.EFF(13,"search "),t.k0s()()()()()()(),t.j41(14,"div",12)(15,"div",6)(16,"div",13)(17,"table",14),t.bIt("matSortChange",function(h){return D.announceSortChange(h)}),t.qex(18,15),t.DNE(19,L,2,0,"th",16)(20,z,6,4,"td",17),t.bVm(),t.qex(21,18),t.DNE(22,Y,1,0,"th",19)(23,B,2,1,"td",20),t.bVm(),t.DNE(24,N,1,0,"tr",21)(25,X,1,0,"tr",22),t.k0s(),t.DNE(26,H,5,0,"div",23),t.nrm(27,"mat-paginator",24),t.k0s()()()()()),2&m&&(t.R7$(10),t.R50("ngModel",D.searchDirectory),t.R7$(7),t.Y8G("dataSource",D.dataSource),t.R7$(7),t.Y8G("matHeaderRowDef",D.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",D.displayedColumns),t.R7$(),t.Y8G("ngIf",0==D.arrLength&&!D.loading),t.R7$(),t.Y8G("pageSizeOptions",t.lJ4(6,T)))},dependencies:[K.bT,R.me,R.BC,R.vS,M.$z,W.An,b.iy,P.B4,P.aE,_.Zl,_.tL,_.ji,_.cC,_.YV,_.iL,_.KS,_.$R,_.YZ,_.NB,S.Wk],styles:[".document--wrapper[_ngcontent-%COMP%]     table tbody tr td{padding:12px 10px!important}.document--wrapper[_ngcontent-%COMP%]     table tbody tr td .mat-icon{height:24px;width:24px;font-size:24px;color:#31b7b7;flex-shrink:0}.document--wrapper[_ngcontent-%COMP%]     table tbody tr td:hover{font-weight:700}"]})}return y})()}}]);