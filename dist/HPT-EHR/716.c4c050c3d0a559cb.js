"use strict";(self.webpackChunkcion_angular_16=self.webpackChunkcion_angular_16||[]).push([[716],{2806:(C,g,s)=>{s.d(g,{s:()=>p});var f=s(8834),i=s(4006),m=s(9213),c=s(7278),_=s(9417),e=s(177),v=s(9039),M=s(5802),a=s(4438),P=s(3390),w=s(758);function R(r,h){if(1&r){const t=a.RV6();a.j41(0,"div",17),a.bIt("click",function(){a.eBV(t);const o=a.XpG();return a.Njj(o.showCurrentPassword())}),a.nrm(1,"span",18),a.k0s()}}function D(r,h){if(1&r){const t=a.RV6();a.j41(0,"div",17),a.bIt("click",function(){a.eBV(t);const o=a.XpG();return a.Njj(o.showCurrentPassword())}),a.nrm(1,"span",19),a.k0s()}}function F(r,h){if(1&r&&(a.j41(0,"div",20),a.EFF(1),a.k0s()),2&r){const t=a.XpG();a.R7$(),a.SpI(" ",t.validationMessages.required("Current password")," ")}}function k(r,h){if(1&r&&(a.j41(0,"div",20),a.EFF(1),a.k0s()),2&r){const t=a.XpG();a.R7$(),a.SpI(" ",t.validationMessages.password," ")}}function N(r,h){if(1&r){const t=a.RV6();a.j41(0,"div",17),a.bIt("click",function(){a.eBV(t);const o=a.XpG();return a.Njj(o.showNewPassword())}),a.nrm(1,"span",18),a.k0s()}}function b(r,h){if(1&r){const t=a.RV6();a.j41(0,"div",17),a.bIt("click",function(){a.eBV(t);const o=a.XpG();return a.Njj(o.showNewPassword())}),a.nrm(1,"span",19),a.k0s()}}function I(r,h){if(1&r&&(a.j41(0,"div",20),a.EFF(1),a.k0s()),2&r){const t=a.XpG();a.R7$(),a.SpI(" ",t.validationMessages.required("New password")," ")}}function O(r,h){if(1&r&&(a.j41(0,"div",20),a.EFF(1),a.k0s()),2&r){const t=a.XpG();a.R7$(),a.SpI(" ",t.validationMessages.password," ")}}function u(r,h){if(1&r){const t=a.RV6();a.j41(0,"div",17),a.bIt("click",function(){a.eBV(t);const o=a.XpG();return a.Njj(o.showConfirmPassword())}),a.nrm(1,"span",18),a.k0s()}}function E(r,h){if(1&r){const t=a.RV6();a.j41(0,"div",17),a.bIt("click",function(){a.eBV(t);const o=a.XpG();return a.Njj(o.showConfirmPassword())}),a.nrm(1,"span",19),a.k0s()}}function n(r,h){if(1&r&&(a.j41(0,"div",20),a.EFF(1),a.k0s()),2&r){const t=a.XpG();a.R7$(),a.SpI(" ",t.validationMessages.confirmPassword," ")}}function d(r,h){if(1&r&&(a.j41(0,"div",20),a.EFF(1),a.k0s()),2&r){const t=a.XpG();a.R7$(),a.SpI(" ",t.validationMessages.passwordMismatch," ")}}let p=(()=>{class r{constructor(t,l,o,j,T,x){this.dialog=t,this.fb=l,this.commonService=o,this.changePassDialogRef=j,this.adminService=T,this.data=x,this.validationMessages=M.q,this.showNewPass=!1,this.showCurrPass=!1,this.showConfPass=!1}ngOnInit(){this.initializeChangePasswordForm()}initializeChangePasswordForm(){this.changePasswordForm=this.fb.group({currentPassword:["",[_.k0.required,_.k0.pattern(v.y.password)]],newPassword:["",[_.k0.required,_.k0.pattern(v.y.password)]],confirmPassword:["",_.k0.required]},{validator:this.passwordMatchValidator})}passwordMatchValidator(t){const l=t.get("newPassword"),o=t.get("confirmPassword");return o.value&&l.value!==o.value?{passwordMismatch:!0}:null}changePassword(){this.changePasswordForm.valid&&this.adminService.changePassword({currentPassword:this.changePasswordForm.value.currentPassword,confirmPassword:this.changePasswordForm.value.confirmPassword,userId:this.data.userId}).subscribe({next:l=>{l&&!l.error&&this.successModal(l)},error:l=>{l.error?.error&&this.commonService.openSnackBar(l.error?.message,"ERROR")}})}successModal(t){this.dialog.open(c.c,{disableClose:!0,panelClass:"custom-alert-container",data:{successNote:t.message}}).afterClosed().subscribe(o=>{o&&this.changePassDialogRef.close(!0)})}showNewPassword(){this.showNewPass=!this.showNewPass}showCurrentPassword(){this.showCurrPass=!this.showCurrPass}showConfirmPassword(){this.showConfPass=!this.showConfPass}static#a=this.\u0275fac=function(l){return new(l||r)(a.rXU(i.bZ),a.rXU(_.ok),a.rXU(P.h),a.rXU(i.CP),a.rXU(w.z),a.rXU(i.Vh))};static#e=this.\u0275cmp=a.VBU({type:r,selectors:[["app-change-password-modal"]],standalone:!0,features:[a.aNF],decls:45,vars:14,consts:[[1,"changepassword--wrapper"],[1,"cp--header"],[1,"cp--body"],[1,"row",3,"formGroup"],[1,"col-12"],[1,"form-group"],[1,"col-form-label","fw-600"],[1,"clr--DF0404","ms-1"],[1,"form-input","position-relative"],["placeholder","*********","formControlName","currentPassword",1,"form-control",3,"type"],[1,"show-hide"],["class","text text-danger mt-1",4,"ngIf"],["placeholder","*********","formControlName","newPassword",1,"form-control",3,"type"],["placeholder","*********","formControlName","confirmPassword",1,"form-control",3,"type"],[1,"cp--footer","w-100","d-flex","align-items-center","justify-content-end"],["mat-stroked-button","","color","primary","mat-dialog-close","",1,"me-2"],["mat-raised-button","","color","primary",3,"click","disabled"],[1,"show-hide",3,"click"],[1,"show"],[1,"Hide"],[1,"text","text-danger","mt-1"]],template:function(l,o){1&l&&(a.j41(0,"div",0)(1,"div",1)(2,"h1"),a.EFF(3,"Change Password"),a.k0s()(),a.j41(4,"div",2)(5,"form",3)(6,"div",4)(7,"div",5)(8,"label",6),a.EFF(9,"Current Password "),a.j41(10,"span",7),a.EFF(11," * "),a.k0s()(),a.j41(12,"div",8),a.nrm(13,"input",9),a.DNE(14,R,2,0,"div",10)(15,D,2,0),a.k0s(),a.DNE(16,F,2,1,"div",11)(17,k,2,1,"div",11),a.k0s(),a.j41(18,"div",5)(19,"label",6),a.EFF(20,"New Password "),a.j41(21,"span",7),a.EFF(22," * "),a.k0s()(),a.j41(23,"div",8),a.nrm(24,"input",12),a.DNE(25,N,2,0,"div",10)(26,b,2,0),a.k0s(),a.DNE(27,I,2,1,"div",11)(28,O,2,1,"div",11),a.k0s(),a.j41(29,"div",5)(30,"label",6),a.EFF(31,"Confirm Password "),a.j41(32,"span",7),a.EFF(33," * "),a.k0s()(),a.j41(34,"div",8),a.nrm(35,"input",13),a.DNE(36,u,2,0,"div",10)(37,E,2,0),a.k0s(),a.DNE(38,n,2,1,"div",11)(39,d,2,1,"div",11),a.k0s()()()(),a.j41(40,"div",14)(41,"button",15),a.EFF(42,"Cancel"),a.k0s(),a.j41(43,"button",16),a.bIt("click",function(){return o.changePassword()}),a.EFF(44,"Submit"),a.k0s()()()),2&l&&(a.R7$(5),a.Y8G("formGroup",o.changePasswordForm),a.R7$(8),a.Y8G("type",o.showCurrPass?"text":"password"),a.R7$(),a.vxM(14,o.showCurrPass?15:14),a.R7$(2),a.Y8G("ngIf",o.changePasswordForm.controls.currentPassword.touched&&o.changePasswordForm.controls.currentPassword.hasError("required")),a.R7$(),a.Y8G("ngIf",o.changePasswordForm.controls.currentPassword.touched&&o.changePasswordForm.controls.currentPassword.hasError("pattern")),a.R7$(7),a.Y8G("type",o.showNewPass?"text":"password"),a.R7$(),a.vxM(25,o.showNewPass?26:25),a.R7$(2),a.Y8G("ngIf",o.changePasswordForm.controls.newPassword.touched&&o.changePasswordForm.controls.newPassword.hasError("required")),a.R7$(),a.Y8G("ngIf",o.changePasswordForm.controls.newPassword.touched&&o.changePasswordForm.controls.newPassword.hasError("pattern")),a.R7$(7),a.Y8G("type",o.showConfPass?"text":"password"),a.R7$(),a.vxM(36,o.showConfPass?37:36),a.R7$(2),a.Y8G("ngIf",o.changePasswordForm.controls.confirmPassword.touched&&o.changePasswordForm.controls.confirmPassword.hasError("required")),a.R7$(),a.Y8G("ngIf",o.changePasswordForm.hasError("passwordMismatch")&&o.changePasswordForm.controls.confirmPassword.touched),a.R7$(4),a.Y8G("disabled",!o.changePasswordForm.valid))},dependencies:[m.m_,f.Hl,f.$z,i.hM,i.tx,e.MD,e.bT,_.YN,_.qT,_.me,_.BC,_.cb,_.X1,_.j4,_.JD],styles:[".change--password--modal .mat-mdc-dialog-container{width:423px}  .change--password--modal .mat-mdc-dialog-container .changepassword--wrapper{padding:30px 24px}  .change--password--modal .mat-mdc-dialog-container .changepassword--wrapper .cp--header h1{color:#1f2f3e;font-size:18px;margin-bottom:25px;font-weight:600}  .change--password--modal .mat-mdc-dialog-container .changepassword--wrapper .cp--footer{margin-top:17px}"]})}return r})()},7278:(C,g,s)=>{s.d(g,{c:()=>e});var f=s(8834),i=s(4006),m=s(9213),c=s(4438),_=s(9417);let e=(()=>{class v{constructor(a,P,w){this.fb=a,this.dialogRef=P,this.data=w,this.successNote="",this.successNote=null!=w.successNote?w.successNote:this.successNote}static#a=this.\u0275fac=function(P){return new(P||v)(c.rXU(_.ok),c.rXU(i.CP),c.rXU(i.Vh))};static#e=this.\u0275cmp=c.VBU({type:v,selectors:[["app-success-modal"]],standalone:!0,features:[c.aNF],decls:8,vars:2,consts:[[1,"alert--wrapper"],[1,"col-12","d-flex","flex-column","align-items-center","justify-content-center","w-100","text-center"],["src","assets/images/ark/successful.gif","alt","","width","60px"],[1,"alert--note"],[1,"d-flex","align-items-center","justify-content-center"],["mat-raised-button","","color","primary","cdkFocusInitial","",3,"mat-dialog-close"]],template:function(P,w){1&P&&(c.j41(0,"div",0)(1,"div",1),c.nrm(2,"img",2),c.j41(3,"p",3),c.EFF(4),c.k0s(),c.j41(5,"div",4)(6,"button",5),c.EFF(7,"Okay "),c.k0s()()()()),2&P&&(c.R7$(4),c.JRh(w.successNote),c.R7$(2),c.Y8G("mat-dialog-close",!0))},dependencies:[m.m_,f.Hl,f.$z,i.hM,i.tx]})}return v})()},3716:(C,g,s)=>{s.d(g,{O:()=>O});var f=s(4494),i=s(2806),m=s(9417),c=s(5802),_=s(9039),e=s(4438),v=s(4006),M=s(3390),a=s(6992),P=s(758),w=s(177),R=s(8834),D=s(9213),F=s(3902);function k(u,E){if(1&u&&(e.j41(0,"div",31),e.EFF(1),e.k0s()),2&u){const n=e.XpG();e.R7$(),e.SpI(" ",n.validationMessages.required("your First Name")," ")}}function N(u,E){if(1&u&&(e.j41(0,"div",31),e.EFF(1),e.k0s()),2&u){const n=e.XpG();e.R7$(),e.SpI(" ",n.validationMessages.alphabeticChar("First Name")," ")}}function b(u,E){if(1&u&&(e.j41(0,"div",31),e.EFF(1),e.k0s()),2&u){const n=e.XpG();e.R7$(),e.SpI(" ",n.validationMessages.required("your Last Name")," ")}}function I(u,E){if(1&u&&(e.j41(0,"div",31),e.EFF(1),e.k0s()),2&u){const n=e.XpG();e.R7$(),e.SpI(" ",n.validationMessages.alphabeticChar("Last Name")," ")}}let O=(()=>{class u{constructor(n,d,p,r,h){this.dialog=n,this.fb=d,this.commonService=p,this.authService=r,this.adminService=h,this.validationMessages=c.q,this.userRole="system_admin";let t=localStorage.getItem("user");this.userData=t&&null!=t?JSON.parse(t):null}ngOnInit(){this.initializeUpdateProfileForm(),this.getProfile()}initializeUpdateProfileForm(){this.updateProfileForm=this.fb.group({firstName:["",[m.k0.required,m.k0.pattern(_.y.alphabetic)]],lastName:["",[m.k0.required,m.k0.pattern(_.y.alphabetic)]],email:[{value:"",disabled:!0}]})}getProfile(){this.adminService.profile({query:{_id:this.userData._id},params:{firstName:1,lastName:1,email:1,phoneNumber:1,status:1,practiceLocation:1}}).subscribe({next:d=>{d&&!d.error&&(this.updateProfileForm.controls.firstName.setValue(d.data?d.data.firstName:""),this.updateProfileForm.controls.lastName.setValue(d.data?d.data.lastName:""),this.updateProfileForm.controls.email.setValue(d.data?d.data.email:""))},error:d=>{d.error?.error&&this.commonService.openSnackBar(d.error?.message,"ERROR")}})}updateProfile(){this.updateProfileForm.valid&&(this.updateProfileForm.value.userId=this.userData._id,this.updateProfileForm.value.clickAction="update",this.adminService.updateProfile(this.updateProfileForm.value).subscribe({next:n=>{n&&!n.error&&(this.commonService.fetchLoginUserProfile(this.modifyUpdatedProfileData(n.data)),this.commonService.openSnackBar(n.message,"SUCCESS"),this.getProfile())},error:n=>{n.error?.error&&this.commonService.openSnackBar(n.error?.message,"ERROR")}}))}modifyUpdatedProfileData(n){return{_id:n._id,firstName:n.firstName,lastName:n.lastName,role:n.role}}deleteAccount(){this.dialog.open(f.C,{panelClass:"custom-alert-container",data:{warningNote:"Do you really want to delete this account?"}})}changePassword(){this.dialog.open(i.s,{disableClose:!0,panelClass:"change--password--modal",data:{userId:this.userData._id,userRole:this.userRole}}).afterClosed().subscribe(d=>{console.log("changePassword>>>",d),d&&this.authService.logout()})}static#a=this.\u0275fac=function(d){return new(d||u)(e.rXU(v.bZ),e.rXU(m.ok),e.rXU(M.h),e.rXU(a.u),e.rXU(P.z))};static#e=this.\u0275cmp=e.VBU({type:u,selectors:[["app-manage-profile"]],decls:62,vars:6,consts:[[1,"col-12","profile--right--wrapper"],[1,"card"],[1,"card-header","pb-0"],[1,"col-12","d-flex","align-items-center"],["mat-stroked-button","","color","primary",1,"me-3","back--btn"],[1,"material-symbols-outlined","flex-shrink-0","m-0"],[1,"mb-0","clr--1F2F3E","fw-600"],[1,"card-body","d-flex","flex-column","flex-sm-row","mb-5"],[1,"profile--left","d-flex","flex-column","position-relative","flex-shrink-0"],[1,"head--sec","w-100"],[3,"click"],[1,"profile--round","position-relative"],["src","assets/images/ark/user.png","alt","",1,"img-fluid","user--img"],["mat-raised-button","","color","primary",1,"edit--btn"],[1,"d-flex","flex-column","w-100","body--sec"],["mat-stroked-button","","color","primary",1,"w-100","mb-3",3,"click"],[1,"profile--right","d-flex","flex-column","w-100"],[1,"card","w-100","mb-0"],[1,"card-body","mt-4"],[1,"col-12"],[1,"row",3,"formGroup"],[1,"col-12","col-lg-6"],[1,"form-group"],[1,"col-form-label","fw-600"],[1,"clr--DF0404","ms-1"],["type","text","placeholder","First name","formControlName","firstName","maxlength","35",1,"form-control","form-control-md"],["class","text text-danger mt-1",4,"ngIf"],["type","text","placeholder","Last name","formControlName","lastName","maxlength","35",1,"form-control","form-control-md"],["type","text","placeholder","Email ","formControlName","email",1,"form-control","form-control-md"],[1,"col-12","my-2","d-flex","justify-content-end"],["mat-raised-button","","color","primary",3,"click","disabled"],[1,"text","text-danger","mt-1"]],template:function(d,p){1&d&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4)(5,"mat-icon",5),e.EFF(6," keyboard_backspace "),e.k0s()(),e.j41(7,"h3",6),e.EFF(8,"Manage Profile"),e.k0s()()(),e.j41(9,"div",7)(10,"div",8)(11,"div",9)(12,"mat-list")(13,"mat-list-item"),e.EFF(14,"Change Photo "),e.k0s(),e.j41(15,"mat-list-item",10),e.bIt("click",function(){return p.deleteAccount()}),e.EFF(16,"Remove Photo "),e.k0s()()(),e.j41(17,"div",11),e.nrm(18,"img",12),e.j41(19,"button",13)(20,"mat-icon",5),e.EFF(21," edit "),e.k0s()()(),e.j41(22,"div",14)(23,"button",15),e.bIt("click",function(){return p.changePassword()}),e.EFF(24,"Change Password"),e.k0s()()(),e.j41(25,"div",16)(26,"div",17)(27,"div",2)(28,"div",3)(29,"h3",6),e.EFF(30,"Basic Information"),e.k0s()()(),e.j41(31,"div",18)(32,"div",19)(33,"form",20)(34,"div",21)(35,"div",22)(36,"label",23),e.EFF(37,"First Name "),e.j41(38,"span",24),e.EFF(39," * "),e.k0s()(),e.nrm(40,"input",25),e.DNE(41,k,2,1,"div",26)(42,N,2,1,"div",26),e.k0s()(),e.j41(43,"div",21)(44,"div",22)(45,"label",23),e.EFF(46,"Last Name"),e.j41(47,"span",24),e.EFF(48," * "),e.k0s()(),e.nrm(49,"input",27),e.DNE(50,b,2,1,"div",26)(51,I,2,1,"div",26),e.k0s()(),e.j41(52,"div",19)(53,"div",22)(54,"label",23),e.EFF(55,"Email "),e.j41(56,"span",24),e.EFF(57," * "),e.k0s()(),e.nrm(58,"input",28),e.k0s()(),e.j41(59,"div",29)(60,"button",30),e.bIt("click",function(){return p.updateProfile()}),e.EFF(61,"Save"),e.k0s()()()()()()()()()()),2&d&&(e.R7$(33),e.Y8G("formGroup",p.updateProfileForm),e.R7$(8),e.Y8G("ngIf",p.updateProfileForm.controls.firstName.touched&&p.updateProfileForm.controls.firstName.hasError("required")),e.R7$(),e.Y8G("ngIf",p.updateProfileForm.controls.firstName.touched&&p.updateProfileForm.controls.firstName.hasError("pattern")),e.R7$(8),e.Y8G("ngIf",p.updateProfileForm.controls.lastName.touched&&p.updateProfileForm.controls.lastName.hasError("required")),e.R7$(),e.Y8G("ngIf",p.updateProfileForm.controls.lastName.touched&&p.updateProfileForm.controls.lastName.hasError("pattern")),e.R7$(9),e.Y8G("disabled",!p.updateProfileForm.valid))},dependencies:[w.bT,m.qT,m.me,m.BC,m.cb,m.tU,R.$z,D.An,F.jt,F.YE,m.j4,m.JD]})}return u})()},9039:(C,g,s)=>{s.d(g,{y:()=>f});const f={email:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,password:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[-@$!%*?&#^()+=_<>,./;:'"|\`~])[A-Za-z\d-@$!%*?&#^()+=_<>,./;:'"|\`~]{8,16}$/,usPhoneNumber:/^\(\d{3}\) \d{3}-\d{4}$/,alphabetic:/^[a-zA-Z]*$/,onlyNumeric:/^[0-9]+$/,numericAndSpecialCharacter:/^[0-9!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]*$/}},5802:(C,g,s)=>{s.d(g,{q:()=>f});const f={required:i=>`Please enter ${i}`,validEmail:"The email address seems to be incorrect",email:i=>`Please enter a valid ${i}`,password:"Minimum 8 and maximum 16 character, atleast one special character, one numeric & 1 uppercase and lowercase letter",passwordMismatch:"The passwords do not match. Please try again",confirmPassword:"Please confirm your password",invalidPhoneNumber:"Invalid phone number format",alphabeticChar:i=>`Please enter a valid ${i}`,newPasswordRequired:"Please set a password for your account",minlength:(i,m)=>`${i} should be at least ${m} characters.`,maxlength:(i,m)=>`${i} should not exceed ${m} characters.`,noRecords:"No records found!",requiredDropdown:i=>`Please select ${i}`,radioButton:"Gender is required"}}}]);