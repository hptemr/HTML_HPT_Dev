"use strict";(self.webpackChunkcion_angular_16=self.webpackChunkcion_angular_16||[]).push([[861],{2843:(J,x,m)=>{m.d(x,{$:()=>Z});var f=m(4523),c=m(9159),I=m(5802),h=m(446),t=m(4438),M=m(4006),w=m(4710),R=m(6992),A=m(3390),F=m(758),b=m(177),g=m(9417),O=m(8834),D=m(5084),C=m(2102),E=m(9213),j=m(9631),P=m(6695),v=m(2042);function y(r,_){if(1&r&&(t.j41(0,"option",22),t.EFF(1),t.k0s()),2&r){const i=_.$implicit;t.FS9("value",i),t.R7$(),t.SpI("",i," ")}}function T(r,_){if(1&r&&(t.j41(0,"option",22),t.EFF(1),t.k0s()),2&r){const i=_.$implicit;t.FS9("value",i),t.R7$(),t.SpI("",i," ")}}function S(r,_){1&r&&(t.j41(0,"th",38),t.EFF(1," Appointment # "),t.k0s())}function k(r,_){if(1&r&&(t.j41(0,"td",39)(1,"div",40)(2,"div",41),t.nrm(3,"img",42),t.k0s(),t.j41(4,"div")(5,"p",43),t.EFF(6),t.k0s(),t.j41(7,"p",44)(8,"span",45),t.EFF(9,"Patient"),t.k0s(),t.EFF(10),t.k0s(),t.j41(11,"p",44)(12,"span",45),t.EFF(13,"Appointment#"),t.k0s(),t.EFF(14),t.k0s()()()()),2&r){const i=_.$implicit;t.R7$(3),t.FS9("src",i.profileImage,t.B4B),t.R7$(3),t.SpI(" ",i.practiceLocation,""),t.R7$(4),t.SpI(" ",i.patientName,""),t.R7$(4),t.SpI(" ",i.appointmentId,"")}}function L(r,_){1&r&&(t.j41(0,"th",46),t.EFF(1," Appointment Date "),t.k0s())}function B(r,_){if(1&r&&(t.j41(0,"td",39),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&r){const i=_.$implicit;t.R7$(),t.SpI(" ",t.i5U(2,1,i.appointmentDate,"mediumDate")," ")}}function N(r,_){1&r&&(t.j41(0,"th",47),t.EFF(1," Status "),t.k0s())}function V(r,_){if(1&r&&(t.j41(0,"td",39)(1,"p"),t.EFF(2),t.k0s()()),2&r){const i=_.$implicit;t.R7$(),t.ZvI("status ",i.statusFlag,""),t.R7$(),t.JRh(i.status)}}function $(r,_){1&r&&(t.j41(0,"th",47),t.EFF(1," Actions "),t.k0s())}function U(r,_){if(1&r){const i=t.RV6();t.j41(0,"td",39)(1,"div",48)(2,"button",49),t.bIt("click",function(){const p=t.eBV(i).$implicit,e=t.XpG(2);return t.Njj(e.navigateToappointmentDetails(p.id))}),t.j41(3,"mat-icon",50),t.EFF(4,"visibility "),t.k0s()()()()}}function G(r,_){1&r&&t.nrm(0,"tr",51)}function K(r,_){1&r&&t.nrm(0,"tr",52)}function z(r,_){if(1&r&&(t.j41(0,"div",53)(1,"div",54),t.nrm(2,"img",55),t.j41(3,"p",56),t.EFF(4),t.k0s()()()),2&r){const i=t.XpG(2);t.R7$(4),t.JRh(i.validationMessages.noRecords)}}function W(r,_){if(1&r){const i=t.RV6();t.j41(0,"div",23)(1,"div",24)(2,"table",25),t.bIt("matSortChange",function(p){t.eBV(i);const e=t.XpG();return t.Njj(e.announceSortChange(p))}),t.qex(3,26),t.DNE(4,S,2,0,"th",27)(5,k,15,4,"td",28),t.bVm(),t.qex(6,29),t.DNE(7,L,2,0,"th",30)(8,B,3,4,"td",28),t.bVm(),t.qex(9,31),t.DNE(10,N,2,0,"th",32)(11,V,3,4,"td",28),t.bVm(),t.qex(12,33),t.DNE(13,$,2,0,"th",32)(14,U,5,0,"td",28),t.bVm(),t.DNE(15,G,1,0,"tr",34)(16,K,1,0,"tr",35),t.k0s(),t.DNE(17,z,5,1,"div",36),t.j41(18,"mat-paginator",37,1),t.bIt("page",function(p){t.eBV(i);const e=t.XpG();return t.Njj(e.handlePageEvent(p))}),t.k0s()()()}if(2&r){const i=t.XpG();t.R7$(2),t.Y8G("dataSource",i.appointmentsList),t.R7$(13),t.Y8G("matHeaderRowDef",i.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",i.displayedColumns),t.R7$(),t.Y8G("ngIf",i.appointmentsList&&0==i.appointmentsList.filteredData.length),t.R7$(),t.Y8G("length",i.totalCount)("pageSize",i.pageSize)("showFirstLastButtons",!0)("pageSizeOptions",i.pageSizeOptions)("pageIndex",i.pageIndex)}}function Y(r,_){1&r&&(t.j41(0,"p",62),t.EFF(1,"No Records Found!"),t.k0s())}function X(r,_){1&r&&(t.j41(0,"p",62),t.EFF(1,"Currently there are no appointments to show!"),t.k0s())}function H(r,_){1&r&&(t.j41(0,"p",63),t.EFF(1,"Kindly click on \u201cBook Appointment\u201d to schedule a new appointment."),t.k0s())}function q(r,_){if(1&r&&(t.j41(0,"div",57)(1,"div",58),t.nrm(2,"img",59),t.DNE(3,Y,2,0,"p",60)(4,X,2,0,"p",60)(5,H,2,0,"p",61),t.k0s()()),2&r){const i=t.XpG();t.R7$(3),t.Y8G("ngIf",!i.dayOneFlag),t.R7$(),t.Y8G("ngIf",i.dayOneFlag),t.R7$(),t.Y8G("ngIf",i.dayOneFlag)}}const Q=[];let Z=(()=>{class r{constructor(i,n,p,e,s){this.dialog=i,this.router=n,this.authService=p,this.commonService=e,this.adminService=s,this.displayedColumns=["name","appointmentDate","status","action"],this.dataSource=new c.I6(Q),this.orderBy={updatedAt:-1},this.whereCond={},this.dayTwo=!1,this.dayOne=!0,this.dayOneFlag=!0,this.totalCount=0,this.pageIndex=0,this.pageSize=h.T0,this.pageSizeOptions=h.Xe,this.searchQuery="",this.practiceLocations=h.WM,this.appointmentStatus=h.K0,this.validationMessages=I.q,this.appStatusVal="",this.practiceLocationsVal="",this.toDate="",this.fieldValues=["Accepted","Rescheduled"],this.maxToDate=this.commonService.getMaxAppoinmentFutureMonths(),this.minToDate=new Date}ngOnInit(){(new Date).setHours(0,0,0,0),this.eodDate=new Date(Date.now()+6048e5),this.userBasedQueryChanged(),this.getAppointmentList("")}userBasedQueryChanged(){const i=new Date;i.setHours(0,0,0,0),this.whereCond="support_team"==this.authService.getLoggedInInfo("role")?Object.assign(this.whereCond,{status:{$in:this.fieldValues},appointmentDate:{$gte:i,$lte:this.eodDate}}):Object.assign(this.whereCond,{status:{$in:this.fieldValues},appointmentDate:{$gte:i}})}searchRecords(i,n){n&&""!=n?Object.assign(this.whereCond,{[i]:{$in:n}}):delete this.whereCond[i],this.getAppointmentList("search")}reset(){this.totalCount=0,this.pageIndex=0,this.pageSize=h.T0,this.pageSizeOptions=h.Xe,this.toDate="",this.practiceLocationsVal="",this.appStatusVal="",this.whereCond={},this.userBasedQueryChanged(),this.getAppointmentList("reset")}onDateChange(i){const n=new Date(i.value);n.setHours(0,0,0,0),Object.assign(this.whereCond,{status:{$in:this.fieldValues},appointmentDate:{$gte:n,$lte:this.eodDate}}),this.getAppointmentList("search")}getAppointmentList(i=""){var n=this;return(0,f.A)(function*(){""==i&&n.commonService.showLoader();let p={query:n.whereCond,userQuery:"",fields:{_id:1,patientId:1,therapistId:1,appointmentId:1,status:1,createdAt:1,updatedAt:1,practiceLocation:1,appointmentDate:1},patientFields:{firstName:1,lastName:1,email:1,profileImage:1,status:1,practiceLocation:1},order:n.orderBy,limit:n.pageSize,offset:n.pageIndex*n.pageSize};yield n.authService.apiRequest("post","appointment/getAppointmentList",p).subscribe(function(){var e=(0,f.A)(function*(s){n.commonService.hideLoader(),n.totalCount=s.data.totalCount;let a=[];s.data.appointmentList.length>0&&(yield s.data.appointmentList.map(o=>{let d={id:o._id,appointmentId:o.appointmentId,practiceLocation:o.practiceLocation,createdAt:o.updatedAt,appointmentDate:o.appointmentDate,status:o.status,statusFlag:o.status.charAt(0).toLowerCase()+o.status.slice(1),patientName:o.patientId?.firstName+" "+o.patientId?.lastName,profileImage:h.ns.awsS3Url+h.ns.userProfileFolderPath+o.patientId?.profileImage,therapistName:o.therapistId?.firstName+" "+o.therapistId?.lastName};a.push(d)})),n.totalCount>0&&(n.dayTwo=!0,n.dayOne=!1),n.appointmentsList=new c.I6(a)});return function(s){return e.apply(this,arguments)}}())})()}resetFilter(){this.totalCount=0,this.pageIndex=0,this.pageSize=h.T0,this.pageSizeOptions=h.Xe,this.searchQuery="",this.getAppointmentList("reset")}handlePageEvent(i){this.pageSize=i.pageSize,this.pageIndex=i.pageIndex,this.getAppointmentList()}announceSortChange(i){let n;n="desc"==i.direction?-1:1,this.orderBy="name"==i.active?{appointmentId:n}:{[i.active]:n},this.getAppointmentList()}navigateToappointmentDetails(i){this.router.navigate([this.commonService.getLoggedInRoute(),"appointment-details",i])}static#t=this.\u0275fac=function(n){return new(n||r)(t.rXU(M.bZ),t.rXU(w.Ix),t.rXU(R.u),t.rXU(A.h),t.rXU(F.z))};static#e=this.\u0275cmp=t.VBU({type:r,selectors:[["app-appointment-requests"]],decls:35,vars:11,consts:[["picker2",""],["paginator",""],[1,"col-12","appointment--wrapper"],[1,"col-12"],[1,"card"],[1,"card-header","pb-0"],[1,"col-12","d-flex","align-items-center","justify-content-between","mb-3"],[1,"mb-0","clr--1F2F3E"],[1,"col-12","mt-2"],[1,"row"],[1,"col-12","col-sm-6","col-lg-3"],[1,"form-group"],["aria-label","Default select example",1,"form-select","form-control",3,"ngModelChange","ngModel"],["selected","","value",""],[3,"value",4,"ngFor","ngForOf"],[1,"input-group"],[1,"w-100","am--datepicker"],["readonly","true","placeholder","Appointment Date","matInput","",3,"ngModelChange","dateChange","ngModel","min","max","matDatepicker"],["matIconSuffix","",3,"for"],["mat-stroked-button","","color","primary",3,"click"],["class","card-body",4,"ngIf"],["class","card-body day--one--wrapper d-flex align-items-center justify-content-center",4,"ngIf"],[3,"value"],[1,"card-body"],[1,"col-12","cust--mat--table--wrapper"],["mat-table","","matSort","",1,"cust--mat--table","box--row--table",3,"matSortChange","dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by number",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","appointmentDate"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by weight",4,"matHeaderCellDef"],["matColumnDef","status"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by symbol",4,"matHeaderCellDef"],["matColumnDef","action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","no--record--found align-items-center justify-content-center w-100",4,"ngIf"],[3,"page","length","pageSize","showFirstLastButtons","pageSizeOptions","pageIndex"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by number"],["mat-cell",""],[1,"d-flex","align-items-center"],[1,"img--box","flex-shrink-0"],["alt","Patient Profile Pic",1,"img-fluid",3,"src"],[1,"mb-0","font-16","text-primary","clr--1F2F3E","fw-500"],[1,"mb-0","font-14","clr--1F2F3E"],[1,"fw-700"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by weight"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by symbol"],[1,"w-100","d-flex","align-items-center","justify-content-end"],["mat-button","",1,"flex-shrink-0","min-width-unset","search--fields",3,"click"],[1,"material-symbols-outlined","flex-shrink-0","m-0","text-primary"],["mat-header-row",""],["mat-row",""],[1,"no--record--found","align-items-center","justify-content-center","w-100"],[1,"d-flex","flex-column","align-items-center","w-100"],["src","assets/images/ark/sad.png","alt","",1,"mb-3","sad--img"],[1,""],[1,"card-body","day--one--wrapper","d-flex","align-items-center","justify-content-center"],[1,"d-flex","flex-column","align-items-center","justify-content-center","w-100"],["src","assets/images/ark/calendar-lg.png","alt","",1,"img-fluid","mb-4"],["class","fw-700 clr--1F2F3E text-center mb-2",4,"ngIf"],["class","clr--1F2F3E text-center",4,"ngIf"],[1,"fw-700","clr--1F2F3E","text-center","mb-2"],[1,"clr--1F2F3E","text-center"]],template:function(n,p){if(1&n){const e=t.RV6();t.j41(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"div",6)(5,"h3",7),t.EFF(6,"Upcoming Appointment Requests"),t.k0s()(),t.j41(7,"div",8)(8,"div",9)(9,"div",10)(10,"div",11)(11,"select",12),t.bIt("ngModelChange",function(a){return t.eBV(e),t.Njj(p.searchRecords("practiceLocation",a))}),t.mxI("ngModelChange",function(a){return t.eBV(e),t.DH7(p.practiceLocationsVal,a)||(p.practiceLocationsVal=a),t.Njj(a)}),t.j41(12,"option",13),t.EFF(13,"Practice Location"),t.k0s(),t.DNE(14,y,2,2,"option",14),t.k0s()()(),t.j41(15,"div",10)(16,"div",11)(17,"select",12),t.bIt("ngModelChange",function(a){return t.eBV(e),t.Njj(p.searchRecords("status",a))}),t.mxI("ngModelChange",function(a){return t.eBV(e),t.DH7(p.appStatusVal,a)||(p.appStatusVal=a),t.Njj(a)}),t.j41(18,"option",13),t.EFF(19,"Appointment Status"),t.k0s(),t.DNE(20,T,2,2,"option",14),t.k0s()()(),t.j41(21,"div",10)(22,"div",11)(23,"div",15)(24,"mat-form-field",16)(25,"input",17),t.mxI("ngModelChange",function(a){return t.eBV(e),t.DH7(p.toDate,a)||(p.toDate=a),t.Njj(a)}),t.bIt("dateChange",function(a){return t.eBV(e),t.Njj(p.onDateChange(a))}),t.k0s(),t.nrm(26,"mat-datepicker-toggle",18)(27,"mat-datepicker",null,0),t.k0s()()()(),t.j41(29,"div",10)(30,"div",11)(31,"button",19),t.bIt("click",function(){return t.eBV(e),t.Njj(p.reset())}),t.EFF(32,"Reset Filter"),t.k0s()()()()()(),t.DNE(33,W,20,9,"div",20)(34,q,6,3,"div",21),t.k0s()()()}if(2&n){const e=t.sdS(28);t.R7$(11),t.R50("ngModel",p.practiceLocationsVal),t.R7$(3),t.Y8G("ngForOf",p.practiceLocations),t.R7$(3),t.R50("ngModel",p.appStatusVal),t.R7$(3),t.Y8G("ngForOf",p.appointmentStatus),t.R7$(5),t.R50("ngModel",p.toDate),t.Y8G("min",p.minToDate)("max",p.maxToDate)("matDatepicker",e),t.R7$(),t.Y8G("for",e),t.R7$(7),t.Y8G("ngIf",p.dayTwo),t.R7$(),t.Y8G("ngIf",p.dayOne)}},dependencies:[b.Sq,b.bT,g.xH,g.y7,g.me,g.wz,g.BC,g.vS,O.$z,D.Vh,D.bZ,D.bU,C.rl,C.yw,E.An,j.fg,P.iy,v.B4,v.aE,c.Zl,c.tL,c.ji,c.cC,c.YV,c.iL,c.KS,c.$R,c.YZ,c.NB,b.vh],styles:[".day--one--wrapper[_ngcontent-%COMP%]{height:calc(100vh - 287px)}.day--one--wrapper[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px}  .cust--mat--table tbody tr td:last-child .mat-icon{height:24px;width:24px;font-size:24px}  .cust--mat--table tbody tr td .img--box{width:48px;height:48px;border-radius:100%;overflow:hidden;margin-right:15px}@media only screen and (max-width: 599px){.day--one--wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80px}.day--one--wrapper[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}.cust--mat--table--wrapper[_ngcontent-%COMP%]   .cust--mat--table.box--row--table.mat-mdc-table[_ngcontent-%COMP%]{width:800px}}@media only screen and (min-width: 600px) and (max-width: 979px){.day--one--wrapper[_ngcontent-%COMP%]{height:auto}.day--one--wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80px;margin-top:70px}.day--one--wrapper[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}}@media screen and (orientation: landscape) and (max-width: 850px){.day--one--wrapper[_ngcontent-%COMP%]{height:auto}.day--one--wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80px;margin-top:70px}.day--one--wrapper[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}.cust--mat--table--wrapper[_ngcontent-%COMP%]   .cust--mat--table.box--row--table.mat-mdc-table[_ngcontent-%COMP%]{width:900px}}"]})}return r})()},263:(J,x,m)=>{m.d(x,{_:()=>i});var f=m(4523),c=m(9159),I=m(5802),h=m(446),t=m(4438),M=m(4006),w=m(4710),R=m(6992),A=m(3390),F=m(758),b=m(177),g=m(9417),O=m(8834),D=m(2765),C=m(5084),E=m(2102),j=m(9213),P=m(9631),v=m(6695),y=m(2042);function T(n,p){if(1&n&&(t.j41(0,"option",28),t.EFF(1),t.k0s()),2&n){const e=p.$implicit;t.FS9("value",e),t.R7$(),t.SpI("",e," ")}}function S(n,p){if(1&n&&(t.j41(0,"option",28),t.EFF(1),t.k0s()),2&n){const e=p.$implicit;t.FS9("value",e),t.R7$(),t.SpI("",e," ")}}function k(n,p){1&n&&(t.j41(0,"th",45),t.EFF(1," Appointment # "),t.k0s())}function L(n,p){if(1&n&&(t.j41(0,"td",46)(1,"div",47)(2,"div",48),t.nrm(3,"img",49),t.k0s(),t.j41(4,"div")(5,"p",50),t.EFF(6),t.k0s(),t.j41(7,"p",51)(8,"span",52),t.EFF(9,"Patient"),t.k0s(),t.EFF(10),t.k0s(),t.j41(11,"p",51)(12,"span",52),t.EFF(13,"Appointment#"),t.k0s(),t.EFF(14),t.k0s(),t.j41(15,"p",51)(16,"span",52),t.EFF(17,"Case Name"),t.k0s(),t.EFF(18),t.k0s()()()()),2&n){const e=p.$implicit;t.R7$(3),t.FS9("src",e.profileImage,t.B4B),t.R7$(3),t.SpI(" ",e.practiceLocation?e.practiceLocation:""," "),t.R7$(4),t.SpI(" ",e.patientName," "),t.R7$(4),t.SpI(" ",e.appointmentId," "),t.R7$(4),t.SpI(" ",e.caseName?e.caseName:"N/A"," ")}}function B(n,p){1&n&&(t.j41(0,"th",53),t.EFF(1," Appointment Date "),t.k0s())}function N(n,p){if(1&n&&(t.j41(0,"td",46),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&n){const e=p.$implicit;t.R7$(),t.SpI(" ",t.i5U(2,1,e.appointmentDate,"mediumDate")," ")}}function V(n,p){1&n&&(t.j41(0,"th",54),t.EFF(1," Status "),t.k0s())}function $(n,p){if(1&n&&(t.j41(0,"td",46)(1,"p"),t.EFF(2),t.k0s()()),2&n){const e=p.$implicit;t.R7$(),t.ZvI("status ",e.statusFlag,""),t.R7$(),t.JRh(e.status)}}function U(n,p){1&n&&(t.j41(0,"th",54),t.EFF(1," Patient Check in Status "),t.k0s())}function G(n,p){if(1&n){const e=t.RV6();t.j41(0,"td",46)(1,"mat-checkbox",55),t.bIt("change",function(a){const o=t.eBV(e).$implicit,d=t.XpG(2);return t.Njj(d.patientCheckIn(a,o))}),t.mxI("ngModelChange",function(a){const o=t.eBV(e).$implicit;return t.DH7(o.checkIn,a)||(o.checkIn=a),t.Njj(a)}),t.EFF(2,"Patient Check in Status"),t.k0s()()}if(2&n){const e=p.$implicit;t.R7$(),t.R50("ngModel",e.checkIn)}}function K(n,p){1&n&&(t.j41(0,"th",54),t.EFF(1," Actions "),t.k0s())}function z(n,p){if(1&n){const e=t.RV6();t.j41(0,"td",46)(1,"div",56)(2,"button",57),t.bIt("click",function(){const a=t.eBV(e).$implicit,o=t.XpG(2);return t.Njj(o.navigateToappointmentDetails(a.id))}),t.j41(3,"mat-icon",58),t.EFF(4,"visibility "),t.k0s()()()()}}function W(n,p){1&n&&t.nrm(0,"tr",59)}function Y(n,p){1&n&&t.nrm(0,"tr",60)}function X(n,p){if(1&n&&(t.j41(0,"div",61)(1,"div",62),t.nrm(2,"img",63),t.j41(3,"p",64),t.EFF(4),t.k0s()()()),2&n){const e=t.XpG(2);t.R7$(4),t.JRh(e.validationMessages.noRecords)}}function H(n,p){if(1&n){const e=t.RV6();t.j41(0,"div",29)(1,"div",30)(2,"table",31),t.bIt("matSortChange",function(a){t.eBV(e);const o=t.XpG();return t.Njj(o.announceSortChange(a))}),t.qex(3,32),t.DNE(4,k,2,0,"th",33)(5,L,19,5,"td",34),t.bVm(),t.qex(6,35),t.DNE(7,B,2,0,"th",36)(8,N,3,4,"td",34),t.bVm(),t.qex(9,37),t.DNE(10,V,2,0,"th",38)(11,$,3,4,"td",34),t.bVm(),t.qex(12,39),t.DNE(13,U,2,0,"th",38)(14,G,3,1,"td",34),t.bVm(),t.qex(15,40),t.DNE(16,K,2,0,"th",38)(17,z,5,0,"td",34),t.bVm(),t.DNE(18,W,1,0,"tr",41)(19,Y,1,0,"tr",42),t.k0s(),t.DNE(20,X,5,1,"div",43),t.j41(21,"mat-paginator",44,2),t.bIt("page",function(a){t.eBV(e);const o=t.XpG();return t.Njj(o.handlePageEvent(a))}),t.k0s()()()}if(2&n){const e=t.XpG();t.R7$(2),t.Y8G("dataSource",e.appointmentsList),t.R7$(16),t.Y8G("matHeaderRowDef",e.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",e.displayedColumns),t.R7$(),t.Y8G("ngIf",e.appointmentsList&&0==e.appointmentsList.filteredData.length),t.R7$(),t.Y8G("length",e.totalCount)("pageSize",e.pageSize)("showFirstLastButtons",!0)("pageSizeOptions",e.pageSizeOptions)("pageIndex",e.pageIndex)}}function q(n,p){1&n&&(t.j41(0,"p",70),t.EFF(1,"No Records Found!"),t.k0s())}function Q(n,p){1&n&&(t.j41(0,"p",70),t.EFF(1," Currently there are no appointments to show! "),t.k0s())}function Z(n,p){1&n&&(t.j41(0,"p",71),t.EFF(1," Kindly click on \u201cBook Appointment\u201d to schedule a new appointment. "),t.k0s())}function r(n,p){if(1&n&&(t.j41(0,"div",65)(1,"div",66),t.nrm(2,"img",67),t.DNE(3,q,2,0,"p",68)(4,Q,2,0,"p",68)(5,Z,2,0,"p",69),t.k0s()()),2&n){const e=t.XpG();t.R7$(3),t.Y8G("ngIf",!e.dayOneFlag),t.R7$(),t.Y8G("ngIf",e.dayOneFlag),t.R7$(),t.Y8G("ngIf",e.dayOneFlag)}}const _=[];let i=(()=>{class n{constructor(e,s,a,o,d,l){this.dialog=e,this.router=s,this.authService=a,this.commonService=o,this.adminService=d,this.route=l,this.displayedColumns=["name","appointmentDate","status","patientcheckstatus","action"],this.dataSource=new c.I6(_),this.orderBy={updatedAt:-1},this.whereCond={},this.userQuery={},this.dayTwo=!1,this.dayOne=!0,this.dayOneFlag=!0,this.totalCount=0,this.pageIndex=0,this.pageSize=h.T0,this.pageSizeOptions=h.Xe,this.searchQuery="",this.practiceLocations=h.WM,this.appointmentStatus=h.K0,this.validationMessages=I.q,this.appStatusVal="",this.practiceLocationsVal="",this.toDate="",this.fromDate="",this.selectedFromDate="",this.selectedToDate="",this.seachByName="",this.seachById="",this.fieldValues=["Accepted","Rescheduled"]}ngOnInit(){this.userBasedQueryChanged(),this.getAppointmentList("")}userBasedQueryChanged(){this.authService.getLoggedInInfo("role")}searchRecords(e,s){let a=e.target.value.trim();if(""!=a){a=a.replace("+","\\+");let o={$regex:a,$options:"i"};"byName"==s?this.userQuery={status:"Active",role:"therapist",$or:[{firstName:o},{lastName:o},{email:o}]}:"byId"==s&&(this.whereCond=Object.assign(this.whereCond,{appointmentId:a}))}else this.userQuery={},this.whereCond={};this.getAppointmentList("search")}selectRecords(e,s){s&&""!=s?Object.assign(this.whereCond,{[e]:{$in:s}}):delete this.whereCond[e],this.getAppointmentList("search")}reset(){this.totalCount=0,this.pageIndex=0,this.pageSize=h.T0,this.pageSizeOptions=h.Xe,this.fromDate="",this.toDate="",this.selectedFromDate="",this.selectedToDate="",this.practiceLocationsVal="",this.appStatusVal="",this.seachById="",this.seachByName="",this.whereCond={},this.getAppointmentList("reset")}onDateChange(e,s){let a=new Date(e.value),o={};"fromDate"==s?(o={$gte:a},this.selectedFromDate=a):(o={$lte:a},this.selectedToDate=a),this.selectedFromDate&&this.selectedToDate?(o={$gte:this.selectedFromDate,$lte:this.selectedToDate},Object.assign(this.whereCond,{appointmentDate:o})):Object.assign(this.whereCond,{appointmentDate:o}),this.getAppointmentList("search")}getAppointmentList(e=""){var s=this;return(0,f.A)(function*(){""==e&&s.commonService.showLoader();let a={query:s.whereCond,userQuery:s.userQuery,fields:{_id:1,patientId:1,therapistId:1,appointmentId:1,status:1,caseName:1,createdAt:1,updatedAt:1,practiceLocation:1,appointmentDate:1,checkIn:1},patientFields:{firstName:1,lastName:1,email:1,status:1,profileImage:1,practiceLocation:1},order:s.orderBy,limit:s.pageSize,offset:s.pageIndex*s.pageSize};yield s.authService.apiRequest("post","appointment/getAppointmentList",a).subscribe(function(){var o=(0,f.A)(function*(d){s.commonService.hideLoader(),s.totalCount=d.data.totalCount;let l=[];d.data.appointmentList.length>0&&(yield d.data.appointmentList.map(u=>{let tt={id:u._id,practiceLocation:u.practiceLocation,appointmentId:u.appointmentId,checkIn:u.checkIn,createdAt:u.updatedAt,appointmentDate:u.appointmentDate,status:u.status,caseName:u.caseName,statusFlag:u.status.charAt(0).toLowerCase()+u.status.slice(1),patientName:u.patientId?.firstName+" "+u.patientId?.lastName,profileImage:h.ns.awsS3Url+h.ns.userProfileFolderPath+u.patientId?.profileImage,therapistName:u.therapistId?.firstName+" "+u.therapistId?.lastName};l.push(tt)})),s.totalCount>0&&(s.dayTwo=!0,s.dayOne=!1),s.appointmentsList=new c.I6(l)});return function(d){return o.apply(this,arguments)}}())})()}handlePageEvent(e){this.pageSize=e.pageSize,this.pageIndex=e.pageIndex,this.getAppointmentList()}announceSortChange(e){let s;s="desc"==e.direction?-1:1,this.orderBy="name"==e.active?{appointmentId:s}:{[e.active]:s},this.getAppointmentList()}patientCheckIn(e,s){var a=this;return(0,f.A)(function*(){if(null!=e.source._checked){let o={query:{_id:s.id},updateInfo:{checkIn:e.source._checked}};yield a.authService.apiRequest("post","appointment/updatePatientCheckIn",o).subscribe(function(){var d=(0,f.A)(function*(l){});return function(l){return d.apply(this,arguments)}}())}})()}navigateToappointmentDetails(e){this.router.navigate([this.commonService.getLoggedInRoute(),"appointment-details",e])}static#t=this.\u0275fac=function(s){return new(s||n)(t.rXU(M.bZ),t.rXU(w.Ix),t.rXU(R.u),t.rXU(A.h),t.rXU(F.z),t.rXU(w.nX))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-appointments"]],decls:55,vars:14,consts:[["picker",""],["picker2",""],["paginator",""],[1,"col-12","appointment--wrapper"],[1,"col-12"],[1,"card"],[1,"card-header","pb-0"],[1,"col-12","d-flex","align-items-center","justify-content-between"],[1,"mb-2","clr--1F2F3E"],[1,"col-12","mt-3"],[1,"row"],[1,"col-12","col-sm-6","col-lg-3"],[1,"form-group"],["aria-label","Default select example",1,"form-select","form-control",3,"ngModelChange","ngModel"],["selected","","value",""],[3,"value",4,"ngFor","ngForOf"],["type","text","placeholder","Appointment #",1,"form-control","search--outer",3,"ngModelChange","keyup","ngModel"],["mat-button","",1,"p-0","flex-shrink-0","min-width-unset","search--fields"],[1,"material-symbols-outlined","flex-shrink-0"],["type","text","placeholder","Therapist Name",1,"form-control","search--outer",3,"ngModelChange","keyup","ngModel"],[1,"input-group"],[1,"w-100","am--datepicker"],["name","dp","readonly","isReadonly","placeholder","From Date","matInput","",3,"ngModelChange","dateChange","ngModel","matDatepicker"],["matIconSuffix","",3,"for"],["name","dp2","readonly","isReadonly","placeholder","To Date","matInput","",3,"ngModelChange","dateChange","ngModel","matDatepicker"],["mat-stroked-button","","color","primary",3,"click"],["class","card-body",4,"ngIf"],["class","card-body day--one--wrapper d-flex align-items-center justify-content-center",4,"ngIf"],[3,"value"],[1,"card-body"],[1,"col-12","cust--mat--table--wrapper"],["mat-table","","matSort","",1,"cust--mat--table","box--row--table",3,"matSortChange","dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by number",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","appointmentDate"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by weight",4,"matHeaderCellDef"],["matColumnDef","status"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by symbol",4,"matHeaderCellDef"],["matColumnDef","patientcheckstatus"],["matColumnDef","action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","no--record--found align-items-center justify-content-center w-100",4,"ngIf"],[3,"page","length","pageSize","showFirstLastButtons","pageSizeOptions","pageIndex"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by number"],["mat-cell",""],[1,"d-flex","align-items-center"],[1,"img--box","flex-shrink-0"],["alt","Patient Profile Pic",1,"img-fluid",3,"src"],[1,"mb-0","font-16","text-primary","clr--1F2F3E","fw-500"],[1,"mb-0","font-14","text-primary","clr--1F2F3E"],[1,"fw-700"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by weight"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by symbol"],[1,"",3,"change","ngModelChange","ngModel"],[1,"w-100","d-flex","align-items-center","justify-content-end"],["mat-button","",1,"flex-shrink-0","min-width-unset","search--fields",3,"click"],[1,"material-symbols-outlined","flex-shrink-0","m-0","text-primary"],["mat-header-row",""],["mat-row",""],[1,"no--record--found","align-items-center","justify-content-center","w-100"],[1,"d-flex","flex-column","align-items-center","w-100"],["src","assets/images/ark/sad.png","alt","",1,"mb-3","sad--img"],[1,""],[1,"card-body","day--one--wrapper","d-flex","align-items-center","justify-content-center"],[1,"d-flex","flex-column","align-items-center","justify-content-center","w-100"],["src","assets/images/ark/calendar-lg.png","alt","",1,"img-fluid","mb-4"],["class","fw-700 clr--1F2F3E text-center mb-2",4,"ngIf"],["class","clr--1F2F3E text-center",4,"ngIf"],[1,"fw-700","clr--1F2F3E","text-center","mb-2"],[1,"clr--1F2F3E","text-center"]],template:function(s,a){if(1&s){const o=t.RV6();t.j41(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"div",7)(5,"h3",8),t.EFF(6,"Appointments"),t.k0s()(),t.j41(7,"div",9)(8,"div",10)(9,"div",11)(10,"div",12)(11,"select",13),t.bIt("ngModelChange",function(l){return t.eBV(o),t.Njj(a.selectRecords("practiceLocation",l))}),t.mxI("ngModelChange",function(l){return t.eBV(o),t.DH7(a.practiceLocationsVal,l)||(a.practiceLocationsVal=l),t.Njj(l)}),t.j41(12,"option",14),t.EFF(13,"Practice Location"),t.k0s(),t.DNE(14,T,2,2,"option",15),t.k0s()()(),t.j41(15,"div",11)(16,"div",12)(17,"input",16),t.mxI("ngModelChange",function(l){return t.eBV(o),t.DH7(a.seachById,l)||(a.seachById=l),t.Njj(l)}),t.bIt("keyup",function(l){return t.eBV(o),t.Njj(a.searchRecords(l,"byId"))}),t.k0s(),t.j41(18,"button",17)(19,"mat-icon",18),t.EFF(20,"search "),t.k0s()()()(),t.j41(21,"div",11)(22,"div",12)(23,"input",19),t.mxI("ngModelChange",function(l){return t.eBV(o),t.DH7(a.seachByName,l)||(a.seachByName=l),t.Njj(l)}),t.bIt("keyup",function(l){return t.eBV(o),t.Njj(a.searchRecords(l,"byName"))}),t.k0s(),t.j41(24,"button",17)(25,"mat-icon",18),t.EFF(26,"search "),t.k0s()()()(),t.j41(27,"div",11)(28,"div",12)(29,"select",13),t.bIt("ngModelChange",function(l){return t.eBV(o),t.Njj(a.selectRecords("status",l))}),t.mxI("ngModelChange",function(l){return t.eBV(o),t.DH7(a.appStatusVal,l)||(a.appStatusVal=l),t.Njj(l)}),t.j41(30,"option",14),t.EFF(31,"Appointment Status"),t.k0s(),t.DNE(32,S,2,2,"option",15),t.k0s()()(),t.j41(33,"div",11)(34,"div",12)(35,"div",20)(36,"mat-form-field",21)(37,"input",22),t.mxI("ngModelChange",function(l){return t.eBV(o),t.DH7(a.fromDate,l)||(a.fromDate=l),t.Njj(l)}),t.bIt("dateChange",function(l){return t.eBV(o),t.Njj(a.onDateChange(l,"fromDate"))}),t.k0s(),t.nrm(38,"mat-datepicker-toggle",23)(39,"mat-datepicker",null,0),t.k0s()()()(),t.j41(41,"div",11)(42,"div",12)(43,"div",20)(44,"mat-form-field",21)(45,"input",24),t.mxI("ngModelChange",function(l){return t.eBV(o),t.DH7(a.toDate,l)||(a.toDate=l),t.Njj(l)}),t.bIt("dateChange",function(l){return t.eBV(o),t.Njj(a.onDateChange(l,"toDate"))}),t.k0s(),t.nrm(46,"mat-datepicker-toggle",23)(47,"mat-datepicker",null,1),t.k0s()()()(),t.j41(49,"div",11)(50,"div",12)(51,"button",25),t.bIt("click",function(){return t.eBV(o),t.Njj(a.reset())}),t.EFF(52,"Reset Filter"),t.k0s()()()()()(),t.DNE(53,H,23,9,"div",26)(54,r,6,3,"div",27),t.k0s()()()}if(2&s){const o=t.sdS(40),d=t.sdS(48);t.R7$(11),t.R50("ngModel",a.practiceLocationsVal),t.R7$(3),t.Y8G("ngForOf",a.practiceLocations),t.R7$(3),t.R50("ngModel",a.seachById),t.R7$(6),t.R50("ngModel",a.seachByName),t.R7$(6),t.R50("ngModel",a.appStatusVal),t.R7$(3),t.Y8G("ngForOf",a.appointmentStatus),t.R7$(5),t.R50("ngModel",a.fromDate),t.Y8G("matDatepicker",o),t.R7$(),t.Y8G("for",o),t.R7$(7),t.R50("ngModel",a.toDate),t.Y8G("matDatepicker",d),t.R7$(),t.Y8G("for",d),t.R7$(7),t.Y8G("ngIf",a.dayTwo),t.R7$(),t.Y8G("ngIf",a.dayOne)}},dependencies:[b.Sq,b.bT,g.xH,g.y7,g.me,g.wz,g.BC,g.vS,O.$z,D.So,C.Vh,C.bZ,C.bU,E.rl,E.yw,j.An,P.fg,v.iy,y.B4,y.aE,c.Zl,c.tL,c.ji,c.cC,c.YV,c.iL,c.KS,c.$R,c.YZ,c.NB,b.vh],styles:[".appointment--wrapper .cust--mat--table tbody tr td:last-child .mat-icon{height:24px;width:24px;font-size:24px}  .appointment--wrapper .cust--mat--table tbody tr td .img--box{width:48px;height:48px;border-radius:100%;overflow:hidden;margin-right:15px}  .appointment--wrapper .cust--mat--table.box--row--table.mat-mdc-table thead tr th:nth-child(1){width:35%}  .appointment--wrapper .cust--mat--table.box--row--table.mat-mdc-table thead tr th:nth-child(2){width:28%}  .appointment--wrapper .cust--mat--table.box--row--table.mat-mdc-table thead tr th:nth-child(3){width:200px}  .appointment--wrapper .cust--mat--table.box--row--table.mat-mdc-table thead tr th:nth-child(4){width:250px}  .appointment--wrapper .cust--mat--table.box--row--table.mat-mdc-table thead tr th:nth-child(5){width:150px}  .appointment--wrapper .cust--mat--table.box--row--table.mat-mdc-table tbody tr td:nth-child(1){width:35%}  .appointment--wrapper .cust--mat--table.box--row--table.mat-mdc-table tbody tr td:nth-child(2){width:28%}  .appointment--wrapper .cust--mat--table.box--row--table.mat-mdc-table tbody tr td:nth-child(3){width:200px}  .appointment--wrapper .cust--mat--table.box--row--table.mat-mdc-table tbody tr td:nth-child(4){width:250px}  .appointment--wrapper .cust--mat--table.box--row--table.mat-mdc-table tbody tr td:nth-child(5){width:150px}@media only screen and (max-width: 599px){.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table{width:860px}.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table thead tr th:nth-child(1){width:30%}.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table thead tr th:nth-child(2){width:28%}.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table thead tr th:nth-child(3){width:200px}.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table thead tr th:nth-child(4){width:225px}.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table thead tr th:nth-child(5){width:225px}.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table tbody tr td:nth-child(1){width:30%}.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table tbody tr td:nth-child(2){width:28%}.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table tbody tr td:nth-child(3){width:200px}.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table tbody tr td:nth-child(4){width:225px}.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table tbody tr td:nth-child(5){width:225px}}@media only screen and (min-width: 1280px) and (max-width: 1440px){.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table thead tr th:nth-child(1){width:25%}.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table thead tr th:nth-child(2){width:28%}.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table thead tr th:nth-child(3){width:200px}.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table thead tr th:nth-child(4){width:250px}.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table thead tr th:nth-child(5){width:150px}.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table tbody tr td:nth-child(1){width:25%}.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table tbody tr td:nth-child(2){width:28%}.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table tbody tr td:nth-child(3){width:200px}.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table tbody tr td:nth-child(4){width:250px}.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table tbody tr td:nth-child(5){width:150px}}@media screen and (orientation: landscape) and (max-width: 850px){.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table tbody tr td:nth-child(1), .appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table thead tr th:nth-child(1){width:30%}.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table tbody tr td:last-child, .appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table thead tr th:last-child{width:16%}.appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table tbody tr td:nth-child(3), .appointment--wrapper[_ngcontent-%COMP%]     .cust--mat--table.box--row--table.mat-mdc-table thead tr th:nth-child(3){width:150px}}"]})}return n})()}}]);